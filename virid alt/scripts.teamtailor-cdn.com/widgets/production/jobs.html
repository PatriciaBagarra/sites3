var Teamtailor=window.Teamtailor=window.Teamtailor||{};Teamtailor.JobsSource=Teamtailor.JobsSource||function(){"use strict";var n={},a={},i={},r={},p=function(t){var e,a=function(){return["department","role","regions","locations"].join(",")};return t.apiKey?(e=t.url||"https://api.teamtailor.com/v1/jobs?",e=(e=o(e,t))+"include="+a()+"&",e+="fields[departments]=name&",e+="fields[roles]=name&",e+="fields[locations]=name,city&",e+="fields[regions]=name&",t.limit&&(t.limit=Math.min(t.limit,30),e=e+"page[size]="+t.limit+"&"),t.feed?e=e+"filter[feed]="+t.feed+"&":e+="filter[feed]=public&",t.companies&&(e=e+"filter[company]="+t.companies+"&"),t.departments&&(e=e+"filter[department]="+t.departments+"&"),t.roles&&(e=e+"filter[role]="+t.roles+"&"),t.preselectedDepartment&&(e=e+"filter[department]="+t.preselectedDepartment+"&"),t.preselectedLocation&&(e=e+"filter[locations]="+t.preselectedLocation+"&"),t.locations&&(e=e+"filter[locations]="+t.locations+"&"),t.regions&&(e=e+"filter[regions]="+t.regions+"&")):(e=t.url||"https://tt.teamtailor.com/api/jobs?",t.limit&&(e=e+"limit="+t.limit+"&"),t.preselectedDepartment&&(e=e+"department_name="+t.preselectedDepartment+"&"),t.departments&&(e=e+"department_id="+t.departments+"&"),t.locations&&(e=e+"location_id="+t.locations+"&"),e=e+"company_id="+t.company),e},o=function(t,e){return t+"&api_key="+e.apiKey+"&api_version=20161108&"},d=function(t,e){var a,n=!!window.XDomainRequest,i=function(){e(JSON.parse(a.responseText))};n?((a=new window.XDomainRequest).onprogress=function(){return!0},a.onload=i,a.open("GET",t)):((a=new XMLHttpRequest).open("GET",t,!0),a.onreadystatechange=function(){4===this.readyState&&200<=this.status&&this.status<400&&i()}),a.send()},l=function(t,a,n,i){i===undefined&&(i=[]),n.apiKey?d(t,function(t){if(i=i.concat(t.data),t.links&&t.links.next){var e=o(t.links.next,n);l(e,a,n,i)}else t.data=i,a(t)}):d(t,a)},s=function(t){if(t)for(var e=0;e<t.length;e++)"departments"===t[e].type?n[t[e].id]=t[e]:"roles"===t[e].type?a[t[e].id]=t[e]:"locations"===t[e].type?i[t[e].id]=t[e]:"regions"===t[e].type&&(r[t[e].id]=t[e])},c=function(t){var e=t.department_name;if(e)return e;if(t.relationships&&t.relationships.department.data){var a=n[t.relationships.department.data.id];if(a)return a.attributes.name}return null},u=function(t){if(t.relationships&&t.relationships.role.data){var e=a[t.relationships.role.data.id];if(e)return e.attributes.name}return null},m=function(t){var e=t.location_name;return e||(t.relationships&&t.relationships.locations.data?t.relationships.locations.data.map(function(t){var e=i[t.id];return e?e.attributes.name&&""!==e.attributes.name?e.attributes.name:e.attributes.city:null}).join(", "):null)},f=function(t){return t.relationships&&t.relationships.regions.data?t.relationships.regions.data.map(function(t){var e=r[t.id];return e?e.attributes.name:null}).join(", "):null},b=function(t,e,a){var n=document.createElement(t);return e&&(n.className=e),a&&(n.textContent!==undefined?n.textContent=a:n.innerText=a),n},g=function(t){var e=t.attributes["company-name"];return e?b("span","teamtailor-jobs__company",e):null},_=function(t){var e=c(t);return e?b("span","teamtailor-jobs__department",e):null},v=function(t){var e=u(t);return e?b("span","teamtailor-jobs__role",e):null},h=function(t){var e=f(t);return e?b("span","teamtailor-jobs__region",e):null},y=function(t){var e=m(t);return e?b("span","teamtailor-jobs__location",e):null},j=function(t){var a=b("span","teamtailor-jobs__job-info"),e=[g(t),_(t),v(t),h(t),y(t)].filter(function(t){return null!=t}),n=e.length-1;return e.forEach(function(t,e){a.appendChild(t),e<n&&a.appendChild(document.createTextNode(" - "))}),a},S=function(t,e){return!!t.links["careersite-job-internal-url"]&&(!!t.attributes.internal||"public"!==e.feed)},T=function(t,e){var a=t.title||t.attributes.title,n=b("a","teamtailor-jobs__job-title",a),i=S(t,e)?t.links["careersite-job-internal-url"]:t.links["careersite-job-url"],r=i.split("/")[2];return i+="?utm_campaign=jobs-widget&utm_source="+r+"&utm_content=jobs&utm_medium=web",n.setAttribute("href",i),e.popup&&n.setAttribute("target","_blank"),n},A=function(t,e){var a=b("div","teamtailor-jobs__job");return a.appendChild(T(t,e)),a.appendChild(j(t)),a},w=function(t,e,a){var n,i=t.querySelectorAll(".teamtailor-jobs__job-wrapper")[0];i.innerHTML="",a.apiKey?(n=e.data,s(e.included)):n=e.jobs;for(var r=0;r<n.length;++r)i.appendChild(A(n[r],a));a.pagination&&i.appendChild(C(t,e,a))},C=function(t,e,a){var n=b("div","teamtailor-jobs__pagination");if(e.links.prev){var i=k("prev",t,e,a);n.appendChild(i)}if(e.links.prev&&e.links.next&&n.appendChild(document.createTextNode(" \u2014 ")),e.links.next){var r=k("next",t,e,a);n.appendChild(r)}return n},k=function(a,n,i,r){var t=b("a","teamtailor-jobs__pagination__"+a,i.meta.texts[a]);return t.setAttribute("href",i.links[a]),t.addEventListener("click",function(t){t.preventDefault();var e=o(i.links[a],r);d(e,function(t){w(n,t,r)})}),t},x=function(t,e){var a=b("option",null,t);a.value="";var n=b("select","teamtailor-jobs__select");return n.appendChild(a),e.appendChild(n),n},D=function(t,e,a,n,i){var r,o,l=function(t){return"locations"===e?t.attributes?t.attributes.name&&""!==t.attributes.name?t.attributes.name:t.attributes.city:t.name:t.attributes?t.attributes.name:t.name},s=function(t){var e=b("option",null,t);return e.value=t,e},c=function(t,e){var a,n=[];for(a=0;a<e.length;++a)n.push(l(e[a]));for(n=n.filter(function(t,e,a){return a.indexOf(t)===e}).sort(),a=0;a<n.length;++a)t.appendChild(s(n[a]))};i.apiKey?(r=t.meta.texts.all,o=t.data):(r=t.text,o=t.items);var u=x(r,n);u.addEventListener("change",function(t){t.target.value&&0<t.target.value.length?i[e]='"'+t.target.value.replace(/&/g,"%26")+'"':i[e]="",d(p(i),function(t){w(a,t,i)})}),c(u,o)},L=function(e,a,n){var t;n.apiKey?(t=n.url||"https://api.teamtailor.com/v1/"+e+"?",t=o(t,n),"locations"===e?t+="&fields[locations]=name,city":"departments"===e?t+="&fields[departments]=name":"regions"===e&&(t+="&fields[regions]=name"),n.companies&&(t+="&filter[company]="+n.companies)):t="https://tt.teamtailor.com/api/"+e+"?company_id="+n.company;var i=b("div","teamtailor-jobs__select-wrapper");a.querySelectorAll(".teamtailor-jobs__filters")[0].appendChild(i),l(t,function(t){(t.items&&t.items.length||t.data&&t.data.length)&&D(t,e,a,i,n)},n)},E=function(){var t="",e=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");t+=".teamtailor-jobs__job-title { display: block; }",t+=".teamtailor-jobs__job { margin-bottom: 1em; }",t+=".teamtailor-jobs__select-wrapper { float: left; margin: 0 1em 1em 0; }",t+=".teamtailor-jobs__job-wrapper { clear: left; }",a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),e.appendChild(a)};return{init:function(i){i.company||i.apiKey?d(p(i),function(t){var e=i.jobsWidget||document.getElementById("teamtailor-jobs-widget"),a=b("div","teamtailor-jobs__job-wrapper");if(e.appendChild(a),w(e,t,i),(i.companySelect||i.departmentSelect||i.locationSelect||i.regionSelect)&&(!i.preselectedDepartment||!i.preselectedLocation)){var n=b("div","teamtailor-jobs__filters");e.insertBefore(n,a),i.companySelect&&L("companies",e,i),i.departmentSelect&&!i.preselectedDepartment&&L("departments",e,i),i.roleSelect&&L("roles",e,i),i.regionSelect&&L("regions",e,i),i.locationSelect&&!i.preselectedLocation&&L("locations",e,i)}}):alert("missing api key")},run:function(){if(!window.TEAMTAILOR_JOB_SCRIPT_LOADED){window.TEAMTAILOR_JOB_SCRIPT_LOADED=!0,E();for(var t=document.querySelectorAll(".teamtailor-jobs-widget"),e=0;e<t.length;++e)Teamtailor.JobsSource.init({company:t[e].getAttribute("data-teamtailor-company"),apiKey:t[e].getAttribute("data-teamtailor-api-key"),limit:t[e].getAttribute("data-teamtailor-limit"),pagination:t[e].getAttribute("data-teamtailor-pagination"),preselectedDepartment:t[e].getAttribute("data-teamtailor-department"),preselectedLocation:t[e].getAttribute("data-teamtailor-location"),popup:t[e].getAttribute("data-teamtailor-popup"),feed:t[e].getAttribute("data-teamtailor-feed")||"public",companySelect:t[e].getAttribute("data-teamtailor-group-company-select"),departmentSelect:t[e].getAttribute("data-teamtailor-department-select"),roleSelect:t[e].getAttribute("data-teamtailor-role-select"),locationSelect:t[e].getAttribute("data-teamtailor-location-select"),regionSelect:t[e].getAttribute("data-teamtailor-region-select"),jobsWidget:t[e]})}}}}(),"complete"===document.readyState||"interactive"===document.readyState||Teamtailor.JobsSource||Teamtailor.JobsSource.run?Teamtailor.JobsSource.run():document.addEventListener("DOMContentLoaded",Teamtailor.JobsSource.run);