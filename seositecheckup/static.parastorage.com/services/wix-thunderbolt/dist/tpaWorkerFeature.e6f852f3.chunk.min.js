(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[7597],{3001:function(r,t,e){"use strict";e.r(t),e.d(t,{TpaWorkerSymbol:function(){return s.m},editor:function(){return y},site:function(){return C}});var n=e(97478),o=e(59032),a=e(31191),i=e(43757),p=e(61049),u=e(55048),c=e(26513),f=e(20140),s=e(54163),d=e(44263),l=new RegExp("^tpaWorker_([0-9]+)$"),v=function(r){return l.test(r)},k=function(r){var t;return null===(t=l.exec(r))||void 0===t?void 0:t[1]},m=function(r){return"tpaWorker_"+r},g=function(r){var t,e=r.tpaContextMapping,n=r.props,o=r.tpaSrcBuilder,a=r.structureApi,i=r.workerId,p=r.appDefinitionId,u=r.appWorkerUrl,c=r.appDefinitionName;e.registerTpasForContext({contextId:"masterPage",pageId:"masterPage"},[i]),n.update(((t={})[i]={title:c,src:o.buildSrc(i,"masterPage",{},u,{extraQueryParams:{endpointType:"worker"},appDefinitionId:p})},t)),a.addComponentToDynamicStructure(i,{components:[],componentType:"TPAWorker"})},x=function(r){var t=r.structureApi,e=r.workerId,n=r.tpaContextMapping;t.removeComponentFromDynamicStructure(e),n.unregisterTpa(e)},h=(0,i.ff)([(0,i.t6)(p.R9,s.u),u.QZ,u.xP,f.RN,f.ex,c.jj],(function(r,t,e,n,o,i){var p=r.tpaWorkers,u=(0,d.w)(),c=u.resolver,f=u.promise;return{appDidMount:function(){f.then((function(){return Object.entries(p).forEach((function(r){var i=(0,a.CR)(r,2),p=i[0],u=i[1],c=m(p);g((0,a.pi)({tpaContextMapping:o,props:e,tpaSrcBuilder:n,structureApi:t,workerId:c},u))}))}))},appWillLoadPage:function(){return(0,a.mG)(this,void 0,void 0,(function(){return(0,a.Jh)(this,(function(r){return i.getCurrentRouteInfo()&&c(),[2]}))}))},getWorkerDetails:function(r){var t=k(r);return p[t]},isTpaWorker:v}})),w=(0,i.ff)([(0,i.t6)(p.R9,s.u)],(function(r){var t=r.tpaWorkers;return{getWorkerDetails:function(r){var e=k(r);return t[e]},isTpaWorker:v}})),W=(0,i.ff)([u.QZ,u.xP,f.RN,f.ex],(function(r,t,e,n){var o=new Set;return{featureName:s.u,handlers:{handleTpaWorkersChange:function(i){var p,u,c=new Set;Object.entries(i).forEach((function(i){var p=(0,a.CR)(i,2),u=p[0],f=p[1],s=m(u);o.has(s)||g((0,a.pi)({tpaContextMapping:n,props:t,tpaSrcBuilder:e,structureApi:r,workerId:s},f)),c.add(s)}));try{for(var f=(0,a.XA)(o),s=f.next();!s.done;s=f.next()){var d=s.value;c.has(d)||x({tpaContextMapping:n,props:t,structureApi:r,workerId:d})}}catch(r){p={error:r}}finally{try{s&&!s.done&&(u=f.return)&&u.call(f)}finally{if(p)throw p.error}}o=c}}}})),C=function(r){r(o.j.AppDidMountHandler,o.j.AppWillLoadPageHandler,s.m).to(h)},y=function(r){r(s.m).to(w),r(n.ZK).to(W)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/tpaWorkerFeature.e6f852f3.chunk.min.js.map