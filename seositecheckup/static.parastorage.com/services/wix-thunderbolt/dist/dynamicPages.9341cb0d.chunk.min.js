(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[8391],{49694:function(e,t,n){"use strict";n.r(t),n.d(t,{DynamicPagesResponseHandlerSymbol:function(){return l.h8},site:function(){return L}});var r,i=n(31191),a=n(43757),o=n(19238),u=n(61049),s=n(49574),c=n(56405),l=n(63577),d="__403__dp",p="__404__dp",f="__500__dp",h="__uknown_error__dp",v=function(e){return e.replace("./","").split("/")},g=function(e){return/(^https?)|(^data)|(^blob)|(^\/\/)/.test(e)},m=function(e,t){return/^\/(.*)/.test(e)?"."+e:"./"+t+"/"+e},D=function(e){return v(e)[0]},I=function(e,t){var n=t.result,r=n.page,a=n.data,o=n.head,u=n.tpaInnerRoute,s=n.publicData;return(0,i.pi)((0,i.pi)({},e),{pageId:r,dynamicRouteData:{pageData:a,pageHeadData:o,publicData:s,tpaInnerRoute:u}})};!function(e){e.PAGES="pages",e.SITEMAP="sitemap"}(r||(r={}));var b=function(e,t,n,r,i){var a=e.optionsData.bodyData,o=a.routerPrefix,u=a.config,s=a.pageRoles,c=function(e){return"/"+v(e).slice(1).join("/")}(t),l=""+r+o+c+n;return JSON.stringify({routerPrefix:o,routerSuffix:c,fullUrl:l,config:u,pageRoles:s,requestInfo:{env:"browser",formFactor:i}})},_=function(e,t,n,r,a,o,u){var s=e.urlData,c=s.basePath,l=s.queryParams,d=s.appDefinitionId,p=function(e,t,n){var r=new URL(e);return r.searchParams.append(t,n),r.toString()}(c+"/"+u+"?"+l,"instance",n.getAppInstanceByAppDefId(d)),f=e.shouldAddWixCodeInstanceToHeader&&n.getAppInstanceByAppDefId(e.wixCodeAppDefinitionId);return f&&(e.optionsData.headers.Authorization=f),{url:p,options:(0,i.pi)((0,i.pi)({method:"POST",body:b(e,r,a,o,t),headers:e.optionsData.headers},e.optionsData.credentials?{credentials:e.optionsData.credentials}:{}),e.optionsData.mode?{mode:e.optionsData.mode}:{})}},U=(0,a.ff)([(0,a.t6)(u.R9,l.u2),c.X,s.U,o.Iz,l.h8,l.Dp],(function(e,t,n,a,o,u){var s=e.prefixToRouterFetchData,c=e.routerPagesSeoToIdMap,l=e.externalBaseUrl,d=e.viewMode,f=o.handleResponse;return{getSitemapFetchParams:function(e){var n=s[e];return n?_(n,d,t,a.getRelativeEncodedUrl(),a.getParsedUrl().search,l,r.SITEMAP):null},handle:function(e){return(0,i.mG)(this,void 0,void 0,(function(){var a,o,h,v,g,m;return(0,i.Jh)(this,(function(I){return!e.pageId&&e.relativeUrl&&e.parsedUrl&&e.relativeEncodedUrl?(a=D(e.relativeUrl),(o=s[a])?(h=_(o,d,t,e.relativeEncodedUrl,e.parsedUrl.search,l,r.PAGES),v=h.url,g=h.options,m=f(n.envFetch(v,g),e),[2,u.getHandler().handle(m,e)]):c[a]?[2,(0,i.pi)((0,i.pi)({},e),{pageId:p})]:[2,e]):[2,e]}))}))}}})),P=n(59032),S=n(5096),w=n(17924),y=n(21924),R=n(8562),A=(0,a.ff)([(0,a.t6)(u.R9,l.u2),S.ZQ,w.Ji,y.QJ,(0,a.jt)(S.sb)],(function(e,t,n,r,a){var o=e.externalBaseUrl;return{handleResponse:function(e,u){return(0,i.mG)(this,void 0,void 0,(function(){var s,c=this;return(0,i.Jh)(this,(function(l){return s=D(u.relativeUrl),[2,e.then((function(e){return(0,i.mG)(c,void 0,void 0,(function(){var c,l,v,D,b,_,U;return(0,i.Jh)(this,(function(P){switch(P.label){case 0:if(!e.ok)throw e;return[4,e.json()];case 1:return c=P.sent(),l=c.result,v=c.exception,D=l.redirectUrl,(b=l.status)&&(0,R.yF)(t)&&r.isInSEO()&&r.setVeloSeoStatusCode(b),D?(0,R.yF)(t)?(_=function(e,t,n,r){if(g(e))return e;var i=m(e,n),a=new URL(i,t+"/");return a.search=r,a.toString()}(D,o,s,u.parsedUrl.search),r.isInSEO()?r.setRedirectUrl(_):function(e){n.setHead('<meta http-equiv="refresh" content="0;url='+e+'" />')}(_),[2,null]):[4,a]:[3,3];case 2:return P.sent(),t.document.head.querySelector('meta[http-equiv="refresh"]')?[2,null]:g(D)?(t.location.assign(D),[2,null]):[2,{redirectUrl:m(D,s)}];case 3:return[2,(U=function(e,t){var n=e.status,r=e.page,i=e.redirectUrl;return t?f:403===n?d:404===n?p:r||i?null:h}(l,v))?(0,i.pi)((0,i.pi)({},u),{pageId:U}):I(u,c)]}}))}))})).catch((function(){return(0,R.yF)(t)?null:(0,i.pi)((0,i.pi)({},u),{pageId:f})}))]}))}))}}})),J=n(26513),x=n(2811),E=n(95848),M=(0,a.ff)([(0,a.t6)(u.Wf,l.u2),o.F0,J.jj,(0,a.jt)(x.n9)],(function(e,t,n,r){var a=function(e,a){return(0,i.mG)(void 0,void 0,void 0,(function(){var e,o;return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return[4,(0,i.mG)(void 0,void 0,Promise,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,r.promptLogin()];case 1:return e.sent(),[2,{success:!0,reason:""}];case 2:return[2,{success:!1,reason:e.sent()}];case 3:return[2]}}))}))];case 1:return e=u.sent(),o=e.success,e.reason===E.$9.CANCELED&&n.isLandingOnProtectedPage()?[2,t.navigate("./")]:o?[2,t.navigate(a.parsedUrl.href)]:[2,!1]}}))}))};return e.update((function(){return{handlePermissions:a,isMemberLoggedIn:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,null==r?void 0:r.getMemberDetails()];case 1:return[2,!!e.sent()]}}))}))},isSiteMembersInstalled:!!r}})),{appWillMount:function(){return(0,i.mG)(void 0,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return[2]}))}))}}})),G=n(82627),F=(0,a.ff)([(0,a.t6)(u.Wf,l.u2),G.O],(function(e,t){return{getHandler:function(){return{handle:function(n,r){return(0,i.mG)(void 0,void 0,void 0,(function(){var a,o,u,s,c,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t["specs.thunderbolt.newLoginFlowOnProtectedCollection"]?[4,n]:[2,n];case 1:return a=i.sent(),o=e.get(),u=o.handlePermissions,s=o.isMemberLoggedIn,c=o.isSiteMembersInstalled,[4,s()];case 2:return l=i.sent(),c&&(null==a?void 0:a.pageId)===d&&!l?(u(a,r),[2,null]):[2,a]}}))}))}}}}})),L=function(e){e(o.BD.Dynamic,u.o8).to(U),e(l.h8).to(A),e(l.N8,P.j.AppWillMountHandler).to(M),e(l.Dp).to(F)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/dynamicPages.9341cb0d.chunk.min.js.map