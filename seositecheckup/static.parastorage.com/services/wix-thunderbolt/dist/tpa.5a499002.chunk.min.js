(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[7955],{12073:function(e,t,n){"use strict";n.d(t,{$E:function(){return s},$H:function(){return p},Xr:function(){return c}});var i=n(31191),r=n(43757),o=n(5096),a=n(98118),u={},s="TPA_PUB_SUB_";function p(e){var t=new RegExp("^"+s);return e.replace(t,"")}var c=(0,r.ff)([o.ZQ,a.ku],(function(e,t){function n(e,t){var n,i={persistentData:[],listeners:{}};return u[e]?u[e][t]||(u[e][t]=i):u[e]=((n={})[t]=i,n),u[e][t]}function r(e){Object.keys(u).forEach((function(t){Object.keys(u[t]).forEach((function(r){var o=n(t,r);Object.entries(o.listeners).forEach((function(t){var n=(0,i.CR)(t,2),r=n[0],a=n[1];Object.keys(a).forEach((function(t){e(t,r)&&delete o.listeners[r][t]}))}))}))}))}return{publish:function(e,t,r){var o=p(r.eventKey),a=r.isPersistent,u=n(e,o),s=u.listeners;if(Object.entries(s).forEach((function(e){var n=(0,i.CR)(e,2),a=n[0],u=n[1];return Object.keys(u).forEach((function(e){s[a][e].forEach((function(e){return e({data:r.eventData,name:o,origin:t})}))}))})),a){var c=r.eventData;u.persistentData.push({name:o,data:c})}},subscribe:function(e,i,r,o){var a=p(r.eventKey),u=n(e,a);u.listeners[t]||(u.listeners[t]={}),u.listeners[t][i]?"worker"===i&&u.listeners[t][i].push(o):u.listeners[t][i]=[o],r.isPersistent&&u.persistentData.length&&o({data:u.persistentData[0].data,name:a,origin:i},!0)},unsubscribe:function(e,t,i){var r=n(e,p(i));Object.keys(r.listeners).forEach((function(e){delete r.listeners[e][t]}))},handleIframeSubscribe:function(t,n,i){var r=i.eventKey,o=i.isPersistent,a=i.callId;this.subscribe(t,n,{eventKey:r,isPersistent:o},(function(t,i){void 0===i&&(i=!1),function(e,t,n){var i=n.document.getElementById(e);if(i){var r=i.getElementsByTagName("iframe")[0];r&&r.contentWindow&&r.contentWindow.postMessage(JSON.stringify(t),"*")}}(n,i?{intent:"TPA_RESPONSE",callId:a,type:"registerEventListener",res:{drain:!0,data:[t]},status:!0,compId:n}:{eventType:r,intent:"addEventListener",params:t},e)}))},clearListenersBesideStubs:function(){r((function(e,n){return!e.includes("tpapopup")&&!e.includes("tpaWorker")&&n===t&&"masterPage"!==n}))},clearListenersByCompId:function(e){r((function(t){return t===e}))}}}))},48273:function(e,t,n){"use strict";n.r(t),n.d(t,{SiteMapSymbol:function(){return l.Cc},TpaEventsListenerManagerSymbol:function(){return l.PV},TpaFullScreenModeSymbol:function(){return l.u5},TpaModalSymbol:function(){return l.R3},TpaPopupSymbol:function(){return l.jn},TpaSymbol:function(){return l.e4},name:function(){return l.u2},page:function(){return Sn}});var i,r,o=n(59032),a=n(95793),u=n(5096),s=n(31191),p=n(43757),c=n(61049),l=n(7259),d=n(20140),f="_rtby_",g=function(e,t){return""+e+f+t},m=function(e){return e.split(f).length>1},h=function(e){var t=(0,s.CR)(e.split(f),2),n=t[0];return t[1]||n},v=n(37793),I=n(54163),P=Symbol("TPA_HANDLER_EMPTY_RESPONSE"),T={WIX_CHAT:"14517e1a-3ff0-af98-408e-2bd6953c36a2",WIX_RESTAURANTS:"13e8d036-5516-6104-b456-c8466db39542"},w="PageLink",y="ExternalLink",C="AnchorLink",b="EmailLink",S="PhoneLink",D="WhatsAppLink",R="DocumentLink",E="DynamicPageLink",x="AddressLink",k="MenuHeader",M=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2),(0,p.fi)(a.g),u.ZQ,u.Zr,(0,p.jt)(I.m),(0,p.jt)(v.KO)],(function(e,t,n,i,r,o,a){var u=r.mode.debug,p=e.appsClientSpecMapData,c=e.widgetsClientSpecMapData,l=function(e){var n=e.tpa,i=e.origin,r=e.callId,o=e.status,u=e.res,s=e.compId,p={callId:r,intent:"TPA_RESPONSE",status:o,res:u};a&&a.tpa.addMessage({message:p,compId:s,contextId:t.pageId,origin:i}),n.postMessage(JSON.stringify(p),"*")},d=Object.assign.apply(Object,(0,s.ev)([{}],(0,s.CR)(n.map((function(e){return e.getTpaHandlers()})))));return{handleMessage:function(n){var i,r,a,f=n.source,g=n.origin,v=n.message;return(0,s.mG)(this,void 0,void 0,(function(){var n,I,T,w,y,C,b,S,D,R,E,x,k,M,A,O,L,U,_;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:if(n=v.type,I=v.callId,T=v.compId,w=v.data,y=d[n],C=h(T),b=t.widgets[C],S=null==o?void 0:o.isTpaWorker(T),D=S?o.getWorkerDetails(T):null,R=S?D.appDefinitionId:null==b?void 0:b.appDefinitionId,E=null==b?void 0:b.widgetId,x=function(){return"https://editor.wix.com"===g||"https://create.editorx.com"===g||"https://blocks.wix.com"===g},function(){return!1},!(null===(i=c[E])||void 0===i?void 0:i.widgetUrl.startsWith(g))&&!(null===(a=null===(r=c[E])||void 0===r?void 0:r.mobileUrl)||void 0===a?void 0:a.startsWith(g))&&(!S||!D.appWorkerUrl.startsWith(g))&&"https://static.parastorage.com"!==g&&!m(T)&&!x())return u&&console.warn("discarded message from untrusted origin",{origin:g,message:v}),[2];if(!y)return u&&console.warn("TpaHandlerError: "+n+" handler is not implemented"),[2];if(k={callId:I,tpa:f,appDefinitionId:R,tpaCompData:b,appClientSpecMapData:p[R],originCompId:C,viewMode:e.viewMode},void 0===(M=y(T,w,k)))return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,M];case 2:return(A=s.sent())===P?[2]:(l({tpa:f,origin:g,callId:I,compId:T,status:!0,res:A}),[3,4]);case 3:return O=s.sent(),L=O.message,U=O.name,_=O.stack,l({tpa:f,origin:g,callId:I,compId:T,status:!1,res:{error:{message:L,name:U,stack:_}}}),[3,4];case 4:return[2]}}))}))}}})),A=n(29203),O=(0,p.ff)([(0,p.t6)(c.$e,l.u2),A.e,l.PV],(function(e,t,n){var i=function(){},r=function(t){Object.entries(e.widgets).forEach((function(e){n.dispatch("CONSENT_POLICY_UPDATE",(function(){return t}),{compId:e[0]})}))};return{pageDidMount:function(){i=t.registerToChanges(r)},pageDidUnmount:function(){i()}}})),L=(0,p.ff)([],(function(){return{getTpaHandlers:function(){return{}}}})),U=n(50287),_=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.jt)(U.d)],(function(e,t){var i=e.externalBaseUrl;return{getTpaHandlers:function(){return{getCustomizedUrlSegments:function(e,r){return(0,s.mG)(this,void 0,void 0,(function(){var e,o,a;return(0,s.Jh)(this,(function(u){switch(u.label){case 0:return e=r.url,o=r.options,a=null==t?void 0:t.urlMappings,[4,n.e(7482).then(n.bind(n,35755))];case 1:return[2,(0,u.sent().getCustomizedUrlSegments)(a,e,(0,s.pi)({baseUrl:i},o))]}}))}))}}}}})),j=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.jt)(U.d)],(function(e,t){var i=e.externalBaseUrl;return{getTpaHandlers:function(){return{buildCustomizedUrl:function(e,r){return(0,s.mG)(this,void 0,void 0,(function(){var e,o,a,u;return(0,s.Jh)(this,(function(p){switch(p.label){case 0:return e=r.key,o=r.itemData,a=r.options,u=null==t?void 0:t.urlMappings,[4,n.e(7482).then(n.bind(n,35755))];case 1:return[2,(0,p.sent().buildCustomizedUrl)(u,e,o,(0,s.pi)({baseUrl:i},a))]}}))}))}}}}})),H=n(16684),N=n.n(H),B=/(?:\+|\()?\d(?:[-.() \t\u00a0\u1680\u180e\u2000\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]{0,5}\d){6,16}\)?(?![<@)\w])|\*\d{4}(?![<@)\w])/,F=/(^|[\s:;,<>])([A-Z0-9][A-Z0-9._%+-]+@[A-Z0-9][A-Z0-9.-]+\.[A-Z]{2,})(?=$|[\s:;,<>])/i,G=/(^|[\s:;,<>])((?:https?:\/\/|www\.)[a-z0-9](?:\.?[a-z0-9\-%_])*(?:(?:\\|\/)[a-z0-9\-._~:/\\?#[\]@!$&'()*+,;=%]*)?)(?=$|[^a-z0-9\-._~:/\\?#[\]@!$&'()*+,;=%])/i,z=new RegExp(/(?:^|[\s:;,<>])(?:\+|\()?\d(?:[-.() \t\u00a0\u1680\u180e\u2000\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]{0,5}\d){6,16}\)?(?![<@)\w])|\*\d{4}(?![<@)\w])/,"g"),V=/([A-Z0-9][A-Z0-9._%+-]+@[A-Z0-9][A-Z0-9.-]+\.[A-Z]{2,})/gi,W=/((?:https?:\/\/|www\.)[a-z0-9](?:\.?[a-z0-9\-%_])*(?:(?:\\|\/)[a-z0-9\-._~:/\\?#[\]@!$&'()*+,;=%]*)?)/gi,$="PHONE",J="MAIL",Z="URL",Q=function(e){return 0===e.toLowerCase().indexOf("http")?e:"http://"+e},X=[" ",":",";",",","<",">"],K=((i={})[$]=function(e){var t=e.match(B);return t&&{key:t[0],value:t[0].match(/[*\d]/g).join(""),index:t.index,pattern:$}},i[J]=function(e){var t=e.match(F);if(t){var n=t[1].length,i=t[2];return{key:i,value:i,index:t.index+n,pattern:J}}return null},i[Z]=function(e){var t=e.match(G);if(t){var n=t[2],i=t[1].length;return{key:n,value:Q(n),index:t.index+i,pattern:Z}}return null},i);var q=((r={})[$]="tel:",r[J]="mailto:",r[Z]="",r),Y=function(e,t){var n=function(e,t){if(void 0===t&&(t={}),!e)return null;var n=Object.keys(t).filter((function(e){return t[e]})).map((function(t){return K[t](e)})).filter((function(e){return null!==e}));return n[0]?n.reduce((function(e,t){return t.index<e.index?t:e}),n[0]):null}(e,{MAIL:!0,URL:!0,PHONE:t});return n&&function(e){var t=e.pattern,n=e.value,i=t===Z?{target:"_blank"}:{};return(0,s.pi)((0,s.pi)({},i),{href:""+q[t]+n})}(n)},ee=function(e){return function(t){var n="",i=t.trim();switch(e){case"email":n='href="mailto:'+i+'"';break;case"phone":n='href="tel:'+i+'"';break;case"url":n='href="'+Q(i)+'" target="_blank"'}return'<a data-auto-recognition="true" '+n+">"+t+"</a>"}},te=ee("email"),ne=ee("url"),ie=ee("phone"),re=function(e,t){return function(n,i){if(!i||!t&&i.startsWith("&lt;"))return n;var r,o=(r=te,i.replace(V,r));return o=function(e,t){return e.replace(W,t)}(o,ne),e&&(o=function(e,t){return e.replace(z,(function(e){var n=X.find((function(t){return t===e[0]}));return n?n+t(e.substring(1,e.length)):t(e)}))}(o,ie)),n.split(i).join(o)}};var oe,ae=function(e){var t=e.recipient,n=e.subject,i=e.body,r=(0,s.pi)((0,s.pi)({},n&&{subject:n}),i&&{body:i}),o=Object.keys(r).map((function(e){return e+"="+r[e]})).join("&");return"mailto:"+t+(o.length>0?"?"+o:"")},ue=function(e){var t=e.target,n=[];return e.isPremiumDomain||n.push("nofollow"),"_blank"===t&&n.push("noopener"),n.join(" ")},se=function(e){return"tel:"+e.phoneNumber},pe=function(e,t,n){var i,r=e.docId,o=e.name,a=e.indexable,u="https://"+t+"."+n,s=r.includes("/")?r:"ugd/"+r;return""+u+(s.startsWith("/")?s:"/"+s)+(r.endsWith(".pdf")?a?"?index=true":"":"?"+(i={dn:o},Object.keys(i).map((function(e){return e+"="+encodeURIComponent(i[e])})).join("&")))},ce=n(73487),le=/^\/([^ ?#]*)?[#]?([^ ?#]*)[?]?(.*)/,de=/^#([^ ?]*)[?]?(.*)/,fe=/^(http|https):\/\/(.*)/,ge=/^wix:document:\/\/v1\/(.+)\/(.+)/,me=/^document:\/\/(.*)/,he={top:"SCROLL_TO_TOP",bottom:"SCROLL_TO_BOTTOM"},ve=function(e){return fe.test(e)},Ie=function(e,t){if(e){var n=(0,s.CR)(t.replace("#","/#").split(/[/]+/),1)[0];return 1===Object.values(e).filter((function(e){return e.prefix===n})).length}return!1},Pe=function(e,t){var n=Object.keys(e.routes).find((function(n){var i=e.routes[n];return"Dynamic"===i.type?(i.pageIds||[]).includes(t):i.pageId===t}));if(n)return n.replace(/^\.\//,"/");throw new Error("No url route for pageId: "+t)},Te=function(e){function t(){var n=e.call(this,"Unsupported link type")||this;return n.name="UnsupportedLinkTypeError",Error.captureStackTrace&&Error.captureStackTrace(n,t),n}return(0,s.ZT)(t,e),t}(Error),we=function(e){return e.replace(/\.\//,"/")},ye=function(e){return["SCROLL_TO_TOP","SCROLL_TO_BOTTOM"].includes(e)},Ce=function(e){var t=e.routingInfo,n=e.metaSiteId,i=e.userFileDomainUrl,r=e.isPremiumDomain,o=e.popupPages,a=e.getCompIdByWixCodeNickname,u=e.getRoleForCompId,p=e.routersConfig,c=e.multilingualInfo,l=e.isMobileView,d="https://"+n+"."+i+"/",f=function(e){return!!o&&o[e]},g=function(e,t){return void 0===t&&(t=""),"wix:document://v1/"+e+"/"+t},m=function(e){var t,n=(0,s.CR)(le.exec(e),4),i=n[1],r=void 0===i?"":i,o=n[2],a=void 0===o?"":o,u=n[3],p=new URLSearchParams(void 0===u?"":u);return(null==c?void 0:c.isOriginalLanguage)||"QueryParam"!==(null===(t=null==c?void 0:c.currentLanguage)||void 0===t?void 0:t.resolutionMethod)||p.set("lang",c.currentLanguage.languageCode),{relativePageUrlPrefix:r,anchor:a,queryString:p.toString()}},h=function(e,n){void 0===n&&(n="_self");var i=m(e),r=i.relativePageUrlPrefix,o=void 0===r?"":r,u=i.anchor,c=void 0===u?"":u,l=i.queryString,d=he[c]||c;if(f(o))return{type:"PageLink",href:"",target:"_self",linkPopupId:o};var g,h,v,I=t.externalBaseUrl;if(Ie(p,o)){v="./"+o===t.relativeUrl,g="DynamicPageLink",h=I+"/"+o}else{var P=(0,s.CR)(o.split("/")),T=P[0],w=P.slice(1),y=w.length>0?"/"+w.join("/"):"",C=decodeURIComponent(T),b="./"+C,S=t.routes[b];g="PageLink",h=(null==S?void 0:S.pageId)===t.mainPageId&&!y?I:I+"/"+C+y,v=S&&S.pageId===t.pageId}var D=d&&a&&a(d),R=v&&D,E=d&&!R;return(0,s.pi)((0,s.pi)({href:h+(l?"?"+new URLSearchParams(l).toString():""),target:n,type:g},R&&{anchorCompId:D}),E&&{anchorDataId:d})};return{isAbsoluteUrl:ve,isDynamicPage:function(e){var t=m(e).relativePageUrlPrefix;return Ie(p,t)},getImpliedLink:function(e){return Y(e,l)},getImpliedLinks:function(e,t){return function(e,t,n){var i=(void 0===n?{parseEscaped:!1}:n).parseEscaped;return e.replace(/>((?![<>]).+?)<|(?:<a.*>.*<\/a>)/g,re(t,i))}(e,l,t)},getLink:function(e){var n=void 0===e?{}:e,i=n.href,r=void 0===i?"":i,o=n.linkPopupId,a=n.anchorCompId,p=void 0===a?"":a,c=n.anchorDataId,l=void 0===c?"":c,f=n.docInfo,m=n.type;if(o)return"/"+o;if((0,ce.r5)(r))return r;if(function(e){return e.startsWith(d)}(r))return g(f.docId,f.name);if(ye(l))return"#"+(0,H.invert)(he)[l];if("ExternalLink"===m)return r;var h,v=(0,s.CR)(r.split("?"),1)[0],I=(null==u?void 0:u(p,"wixCode"))||l,P=I?"#"+I:"";return""+(v===t.externalBaseUrl?(h=(0,s.CR)(Object.keys(Object.fromEntries(Object.entries(t.routes).filter((function(e){var n=(0,s.CR)(e,2),i=n[0];return n[1].pageId===t.mainPageId&&"./"!==i})))),1)[0],we(h)):function(e){return e.replace(t.externalBaseUrl,"")}(v))+P},getLinkProps:function(e,o){if(u=e,de.test(u)){var a=we(t.relativeUrl);return h(""+a+e,o)}var u,p,c;if(function(e){return le.test(e)}(e))return h(e,o);if((0,ce.r5)(e))return function(e){var t=(0,s.CR)(ce.eu.exec(e),3),n=t[1],i=t[2],r=(0,H.escape)(n),o=(0,H.escape)(i);return{type:"EmailLink",href:ae({recipient:r,subject:o}),target:"_self"}}(e);if((0,ce.J1)(e))return p=e,c=(0,s.CR)(ce.D5.exec(p),2)[1],{type:"PhoneLink",href:se({phoneNumber:c}),target:"_self"};if(ve(e))return function(e,t){return void 0===t&&(t="_blank"),{type:"ExternalLink",href:e,target:t,rel:ue({target:t,isPremiumDomain:r})}}(e,o);if(function(e){return ge.test(e)||me.test(e)}(e))return function(e){var t=(0,s.CR)(ge.exec(e)||me.exec(e),3),r=t[1],o=t[2];return{type:"DocumentLink",href:pe({docId:r,name:o||"",indexable:!1},n,i),target:"_blank",docInfo:{docId:r,name:o}}}(e);throw new Te},getLinkUrlFromDataItem:function(e){var n={AnchorLink:function(){var n=e,i=n.anchorDataId,r=n.pageId,o=ye(i)?t.pageId:r.replace(/^#/,""),a=i.startsWith("#")?i:"#"+i;return""+Pe(t,o)+a},DocumentLink:function(){var t=e,n=t.docId,i=t.name;return g(n,i)},ExternalLink:function(){return e.url},DynamicPageLink:function(){var n=e,i=n.routerId,r=n.innerRoute,o=n.anchorDataId,a=void 0===o?"":o,u=n.isTpaRoute?Pe(t,i):"/"+p[i].prefix,c=r?function(e){var t=(0,s.CR)(e.split("?"),2),n=t[0],i=t[1];if(i){var r=encodeURIComponent("?"+i);return n?""+n+r:r}return n}(r):r;return""+u+(c?"/"+c+a:a)},PageLink:function(){var n=e.pageId,i=(n.id||n||"").replace(/^#/,"");return f(i)?"/"+i:i===t.mainPageId?"/":Pe(t,i)},PhoneLink:function(){return se(e)},EmailLink:function(){return ae(e)}}[e.type];if(n)return n();throw new Error("Provided link type is not supported")}}},be=n(19238),Se=n(23228),De=n(88902),Re=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2),(0,p.t6)(c.jC,l.u2),be.kc,(0,p.jt)(Se.wk),(0,p.jt)(De.HC)],(function(e,t,n,i,r,o){return{getTpaHandlers:function(){return{getStateUrl:function(a,u,p){var c,l=p.originCompId,d=e.metaSiteId,f=e.userFileDomainUrl,g=e.routersConfig,m=e.isPremiumDomain,h=e.appsClientSpecMapByApplicationId,v=e.externalBaseUrl,I=e.isMobileView,P=Ce({routingInfo:i.getLinkUtilsRoutingInfo(),metaSiteId:d,userFileDomainUrl:f,isPremiumDomain:m,routersConfig:g,popupPages:null==r?void 0:r.getPopupPages(),multilingualInfo:null==o?void 0:o.getMultilingualInfo(),isMobileView:I}),T=N()(n.pagesData).groupBy("tpaApplicationId").mapValues((function(e){return e.map((function(e){return e.id}))})).value(),w=Object.entries(n.pagesData).map((function(e){var t,n=(0,s.CR)(e,2),i=n[0];return(t={})[n[1].tpaPageId]=i,t})).reduce(N().assign),y=u.state,C=u.sectionId,b=(c=l,t.widgets[c].applicationId),S=h[b],D=T[b];if(!D||0===D.length)return{error:{message:'Page with app "'+S.appDefinitionName+'" was not found.'}};var R={type:"DynamicPageLink",routerId:w[C]||D[0],isTpaRoute:!0,innerRoute:y},E=P.getLinkUrlFromDataItem(R);return P.isDynamicPage(E)?{error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}}:{url:""+v+E}}}}}})),Ee=(0,p.ff)([(0,p.t6)(c.$e,l.u2)],(function(e){var t=e.widgets;return{getTpaHandlers:function(){return{getStyleParamsByStyleId:function(e,n){var i=Object.values(t).find((function(e){return e.styleId===n.styleId})),r=null==i?void 0:i.style;return r?(0,s.pi)({},r):{error:{message:'Style id "'+n.styleId+'" was not found.'}}}}}}})),xe=n(49574),ke=n(56405),Me=n(81600),Ae=(0,p.ff)([u.Zr,(0,p.t6)(c.R9,d.u2),ke.X,u.ZQ,xe.U],(function(e,t,n,i,r){var o=t.externalBaseUrl,a=function(e){return(0,s.pi)({activityDetails:{additionalInfoUrl:null,summary:""},activityInfo:"activityInfo",activityType:"activityType",contactUpdate:{},activityLocationUrl:i.location.href,createdAt:(new Date).toISOString()},e)},u=function(e,t){return function(n){var i=new URL(t);return Object.entries(n.params).forEach((function(e){var t=(0,s.CR)(e,2),n=t[0],r=t[1];r&&i.searchParams.append(n,r)})),e.envFetch(i.href,{method:"POST",body:JSON.stringify(n.payload),headers:{"Content-Type":"application/json"}})}}(r,o+"/_api/app-integration-bus-web/v1/activities");return{getTpaHandlers:function(){return{postActivity:(0,Me.u)(["site"],(function(t,i,r){var o,p=i.activity,c=r.appDefinitionId;return function(e){return(0,s.mG)(void 0,void 0,void 0,(function(){var t,i,r,o,a,p,c;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return[4,u(e)];case 1:return(t=s.sent()).ok?[3,3]:(p={status:!1},c={status:t.status,statusText:t.statusText},[4,t.text()]);case 2:return[2,(p.response=(c.responseText=s.sent(),c),p)];case 3:return[4,t.json()];case 4:return i=s.sent(),r=i.userSessionToken,o=i.activityId,a=i.contactId,r&&n.setUserSession(r),[2,{status:!0,response:{activityId:o,contactId:a}}]}}))}))}({params:(o={"application-id":c||"TPA",instance:n.getAppInstanceByAppDefId(c)},(0,s.pi)({hs:n.getHubSecurityToken(),"activity-id":"xxxxxxxx".replace(/x/g,(function(){return(16*Math.random()|0).toString(16)})),"metasite-id":e.site.metaSiteId,svSession:n.getUserSession(),version:"1.0.0"},o)),payload:a({contactUpdate:p.contactUpdate||{},activityInfo:p.info||{},activityType:p.type||"TPA",activityDetails:p.details||{}})})}))}}}})),Oe=(0,p.ff)([ke.X],(function(e){return{getTpaHandlers:function(){return{getCtToken:function(){return e.getCtToken()},getUserSession:function(){return e.getUserSession()}}}}})),Le=n(26513),Ue=(0,p.ff)([be.Iz,Le.jj,(0,p.t6)(c.R9,d.u2)],(function(e,t,n){var i=n.routersByPrefix;return{getTpaHandlers:function(){return{getCurrentPageNavigationInfo:function(){var n=e.getRelativeUrl(),r=t.getCurrentRouteInfo(),o=r.type,a=r.pageId;if("Static"===o)return{type:"PageLink",pageId:a};var u=(0,s.CR)(n.split("/")),p=u[1],c=u.slice(2);return{type:"DynamicPageLink",routerId:i[p].routerId,innerRoute:c.join("/")||"/"}}}}}})),_e=(0,p.ff)([u.ZQ],(function(e){return{getTpaHandlers:function(){return{getAdsOnPage:function(){var t=e.document.getElementById("WIX_ADS");if(!t)return{};var n=t.getBoundingClientRect(),i=n.height,r=n.width,o=n.x;return{top:{height:i,width:r,top:n.y,left:o}}}}}}})),je=n(55048),He=n(60091),Ne=n(95100),Be=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2),u.Zr,Le.jj,je.xP,He.q,l.PV,be.kc,(0,p.jt)(Se.wk),(0,p.jt)(Ne.Ai),(0,p.jt)(De.HC)],(function(e,t,n,i,r,o,a,u,p,c,l){return{getTpaHandlers:function(){var n=this,i=function(t){void 0===t&&(t=u.getLinkUtilsRoutingInfo());var n=e.metaSiteId,i=e.userFileDomainUrl,r=e.routersConfig,o=e.isPremiumDomain,a=e.isMobileView;return Ce({routingInfo:t,metaSiteId:n,isPremiumDomain:o,userFileDomainUrl:i,routersConfig:r,popupPages:null==p?void 0:p.getPopupPages(),multilingualInfo:null==l?void 0:l.getMultilingualInfo(),isMobileView:a})},a=function(e){var r=e.compId,a=e.state,p=e.skipHistory,c=e.queryParams,l=void 0===c?{}:c,d=e.disableScrollToTop,f=void 0===d||d;return(0,s.mG)(n,void 0,void 0,(function(){var e,n,c,d,g,m,h,v,I;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return e=u.getLinkUtilsRoutingInfo(),n=i(e),c=t.widgets,(null===(I=c[r])||void 0===I?void 0:I.isSection)?(d={type:"DynamicPageLink",routerId:e.pageId,innerRoute:a,isTpaRoute:!0},g=n.getLinkUrlFromDataItem(d),m=N().isEmpty(l)?"":"?appSectionParams="+encodeURIComponent(JSON.stringify(l)),h=""+g+m,v=n.getLinkProps(h),[4,o.navigateTo(v,{skipHistory:p,disableScrollToTop:f})]):[2];case 1:return s.sent(),[2]}}))}))};return{replaceSectionState:function(e,t){var n=t.state,i=t.queryParams;return(0,s.mG)(this,void 0,Promise,(function(){return(0,s.Jh)(this,(function(t){return[2,a({compId:e,skipHistory:!0,state:n,queryParams:i})]}))}))},appStateChanged:function(e,t){var n=t.state;return(0,s.mG)(this,void 0,Promise,(function(){var t,p,l;return(0,s.Jh)(this,(function(d){try{t=JSON.parse(n)}catch(e){t=null}return p=function(t){var n=r.get(e).onItemClicked;n&&n({type:"itemClicked",itemIndex:t,item:r.get(e).images[t]})},t?((l={zoom:function(){var n=(0,s.CR)(t.args,1)[0],i=r.get(e).images[n].id;c.openImageZoom(e,i),p(n)},itemClicked:function(){var e=(0,s.CR)(t.args,1)[0];p(e)},itemChanged:function(){var n=(0,s.CR)(t.args,1)[0],i=r.get(e).onCurrentItemChanged;i&&i({type:"imageChanged",itemIndex:n,item:r.get(e).images[n]})},componentReady:function(){var t;r.update(((t={})[e]={componentReady:!0},t))},navigateToDynamicPage:function(){var e=(0,s.CR)(t.args,1)[0],n=i(),r=function(e){return!e.id&&!!(e.href||e.linkPopupId||e.anchorDataId||e.anchorCompId)}(e)?e:n.getLinkProps(n.getLinkUrlFromDataItem(e));o.navigateTo(r)},navigateToAnchor:function(){var e=(0,s.CR)(t.args,2),n=e[0],r=e[1],a={type:"PageLink",pageId:"masterPage"===n?u.getLinkUtilsRoutingInfo().pageId:n,target:"_self"},p=i(),c=p.getLinkUrlFromDataItem(a),l=p.getLinkProps(c),d=Object.assign(l,r);o.navigateTo(d)}}[t.cmd])&&l(),[2]):[2,a({compId:e,skipHistory:!1,state:n})]}))}))}}}}})),Fe=n(58629),Ge=n(10666),ze=n(42473),Ve=(0,p.ff)([(0,p.t6)(c.R9,d.u2),Fe.s,Le.jj,(0,p.jt)(ze.R1),(0,p.jt)(Ge.$)],(function(e,t,n,i,r){var o=e.debug;return{getTpaHandlers:function(){return{applicationLoadingStep:function(e,a,u){var s=u.appDefinitionId,p=u.tpaCompData,c=(void 0===p?{}:p).widgetId;if(m(e))o&&console.warn("applicationLoadingStep is ignored in runtime component "+e);else{var l=n.getCurrentRouteInfo(),d=Date.now()-t.initialRequestTimestamp,f=a.stage,g=a.stageNum;null==r||r.logger.log({appId:s,widget_id:c,instance_id:e,src:42,evid:644,tts:d,pid:l?l.pageId:null,stage:f,stageNum:g,pn:i.getPageNumber()},{endpoint:"ugc-viewer"})}}}}}})),We=(0,p.ff)([(0,p.t6)(c.R9,d.u2),Fe.s,Le.jj,(0,p.jt)(ze.R1),(0,p.jt)(Ge.$)],(function(e,t,n,i,r){var o=e.debug;return{getTpaHandlers:function(){return{applicationLoaded:function(e,a,u){var s=u.appDefinitionId,p=u.tpaCompData,c=(void 0===p?{}:p).widgetId;if(m(e))o&&console.warn("applicationLoaded is ignored in runtime component "+e);else{var l=n.getCurrentRouteInfo(),d=Date.now()-t.initialRequestTimestamp;null==r||r.logger.log({appId:s,widget_id:c,instance_id:e,src:42,evid:643,tts:d,pid:l?l.pageId:null,pn:i.getPageNumber()},{endpoint:"ugc-viewer"})}}}}}})),$e=n(2811),Je=(0,p.ff)([$e.n9,l.PV],(function(e,t){return{getTpaHandlers:function(){return{refreshCurrentMember:function(){return(0,s.mG)(this,void 0,Promise,(function(){var n;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return[4,e.getMemberDetails(!0)];case 1:return(n=i.sent())&&t.dispatch("MEMBER_DETAILS_UPDATED",(function(){return n})),[2]}}))}))}}}}})),Ze=(0,p.ff)([l.jn,l.R3],(function(e,t){var n=e.openPopup,i=function(e){if(t.isModal(e)){var n=new Error("An app can not open a popup from a modal.");return n.name="Operation not supported",n}return null};return{getTpaHandlers:function(){return{openPopup:(0,Me.u)(["site","preview"],(function(e,t,r){var o=r.originCompId,a=t.url,u=(0,s._T)(t,["url"]),p=i(e);return p?Promise.reject(p):n(a,u,o)})),openPersistentPopup:(0,Me.u)(["site","preview"],(function(e,t,r){var o=r.originCompId,a=t.url,u=(0,s._T)(t,["url"]),p=i(e);return p?Promise.reject(p):n(a,(0,s.pi)((0,s.pi)({},u),{persistent:!0}),o)}))}}}})),Qe=(0,p.ff)([ke.X],(function(e){return{getTpaHandlers:function(){return{getAppVendorProductId:function(t,n){var i,r,o=n.appDefinitionId,a=null===(i=e.getAppInstanceByAppDefId(o))||void 0===i?void 0:i.replace(/^[^.]+./,"");return a&&(null===(r=JSON.parse(atob(a)))||void 0===r?void 0:r.vendorProductId)||null}}}}})),Xe=n(8562),Ke=function(e){return N().isNumber(e)?e:NaN},qe=function(e){return N().parseInt((e||"").toString().split("px")[0])},Ye=function(e){var t,n={size:0,unit:""};return N().isNumber(e)?n.size=e:N().isString(e)&&(n.unit=(t=/(%)$/.exec(e))&&t[1]?t[1]:"",n.size=function(e){var t=/^([0-9]+)/.exec(e);return t&&t[1]?parseInt(t[1],10):0}(e)),n},et=function(e,t){var n=e.width;return"100%"===e.height&&("100%"===n||Number(qe(n))>=t.innerWidth)},tt=function(e,t,n){var i=(0,Xe.yF)(t)?null:t.document.getElementById(n),r=i?i.getBoundingClientRect():null,o={left:r?r.left+t.pageXOffset:0,top:r?r.top+t.pageYOffset:0,width:r?Math.round(r.width):0,height:r?Math.round(r.height):0,actualTop:r?r.top:0,actualLeft:r?r.left:0},a=N().defaults(e.position,{x:0,y:0,origin:"FIXED",placement:"CENTER"}),u=N().pick(e,"height","width"),p={width:(0,Xe.yF)(t)?0:t.innerWidth,height:(0,Xe.yF)(t)?0:t.innerHeight};return function(e,t,n){if(qe(e.width)<10||qe(e.height)<10){var i=Ye(n.height);i.size="%"===i.unit?N().min([i.size,100]):N().min([i.size,t.height]);var r=Ye(n.width);return r.size="%"===r.unit?N().min([r.size,100]):N().min([r.size,t.height]),{position:"fixed",display:"block",width:""+r.size+(r.unit||"px"),height:""+i.size+(i.unit||"px"),marginLeft:""+r.size/-2+(r.unit||"px"),marginTop:""+i.size/-2+(i.unit||"px"),left:"50%",top:"50%"}}return e}({RELATIVE:function(){return function(e,t,n,i){var r=function(e,t,n){return e+t/2-n/2},o=function(e,t,n){return e-(t+n)},a=function(e,t,n){return e-(t+n)},u=function(e,t,n){return e+t/2-n/2},p=Ke(i.height),c=Ke(i.width),l={CENTER:function(){return{height:N().min([p,n.height]),width:N().min([c,n.width]),top:u(t.top,t.height,p),left:r(t.left,t.width,c)}},TOP_LEFT:function(){return{height:N().min([p,t.top]),width:N().min([c,t.left]),top:t.top-p,left:t.left-c}},TOP_RIGHT:function(){return{height:N().min([p,t.top]),width:N().min([c,a(n.width,t.width,t.left)]),top:t.top-p,left:t.width+t.left}},TOP_CENTER:function(){return{height:N().min([p,t.top]),width:N().min([c,n.width]),top:t.top-p,left:r(t.left,t.width,c)}},CENTER_RIGHT:function(){return{height:N().min([p,n.height]),width:N().min([c,a(n.width,t.width,t.left)]),top:u(t.top,t.height,p),left:t.width+t.left}},CENTER_LEFT:function(){return{height:N().min([p,n.height]),width:N().min([c,t.left]),top:u(t.top,t.height,p),left:t.left-c}},BOTTOM_LEFT:function(){return{height:N().min([p,o(n.height,t.top,t.height)]),width:N().min([c,t.left]),top:t.top+t.height,left:t.left-c}},BOTTOM_RIGHT:function(){return{height:N().min([p,o(n.height,t.top,t.height)]),width:N().min([c,a(n.width,t.width,t.left)]),top:t.top+t.height,left:t.width+t.left}},BOTTOM_CENTER:function(){return{height:N().min([p,o(n.height,t.top,t.height)]),width:N().min([c,n.width]),top:t.top+t.height,left:r(t.left,t.width,c)}}}[e.placement](),d=N().max([0,l.top]),f=N().max([0,l.left]);return(0,s.pi)((0,s.pi)((0,s.pi)({},{position:"absolute",display:"block",width:0,height:0}),l),{top:d,left:f})}(a,o,p,u)},ABSOLUTE:function(){return function(e,t,n,i){var r=Ke(i.height),o=Ke(i.width),a={CENTER:function(){var i=N().min([t.actualTop+e.y,n.height-(t.actualTop+e.y)]),a=N().min([t.actualLeft+e.x,n.width-(t.actualLeft+e.x)]);return{height:N().min([r,2*i]),width:N().min([o,2*a]),top:t.top+e.y-r/2,left:t.left+e.x-o/2}},TOP_LEFT:function(){return{height:N().min([r,t.actualTop+e.y]),width:N().min([o,t.actualLeft+e.x]),top:t.top+e.y-r,left:t.left+e.x-o}},TOP_RIGHT:function(){return{height:N().min([r,t.actualTop+e.y]),width:N().min([o,n.width-(t.actualLeft+e.x)]),top:t.top+e.y-r,left:t.left+e.x}},TOP_CENTER:function(){var i=N().min([t.actualLeft+e.x,n.width-(t.actualLeft+e.x)]);return{height:N().min([r,t.actualTop+e.y]),width:N().min([o,2*i]),top:t.top+e.y-r,left:t.left+e.x-o/2}},CENTER_RIGHT:function(){var i=N().min([t.actualTop+e.y,n.height-(t.actualTop+e.y)]);return{height:N().min([r,2*i]),width:N().min([o,n.width-(t.actualLeft+e.x)]),top:t.top+e.y-r/2,left:t.left+e.x}},CENTER_LEFT:function(){var i=N().min([t.actualTop+e.y,n.height-(t.actualTop+e.y)]);return{height:N().min([r,2*i]),width:N().min([o,t.actualLeft+e.x]),top:t.top+e.y-r/2,left:t.left+e.x-o}},BOTTOM_LEFT:function(){return{height:N().min([r,n.height-(t.actualTop+e.y)]),width:N().min([o,t.actualLeft+e.x]),top:t.top+e.y,left:t.left+e.x-o}},BOTTOM_RIGHT:function(){return{height:N().min([r,n.height-(t.actualTop+e.y)]),width:N().min([o,n.width-(t.actualLeft+e.x)]),top:t.top+e.y,left:t.left+e.x}},BOTTOM_CENTER:function(){var i=N().min([t.actualLeft+e.x,n.width-(t.actualLeft+e.x)]);return{height:N().min([r,n.height-(t.actualTop+e.y)]),width:N().min([o,2*i]),top:t.top+e.y,left:t.left+e.x-o/2}}}[e.placement](),u=N().max([0,a.top]),p=N().max([0,a.left]);return(0,s.pi)((0,s.pi)((0,s.pi)({},{position:"absolute",display:"block",width:0,height:0}),a),{top:u,left:p})}(a,o,p,u)},FIXED:function(){return function(e,t,n){var i={position:"fixed",display:"block",width:n.width,height:n.height},r=Ye(n.height);"%"===r.unit?r.size=N().min([r.size,100]):r.size>t.height&&(r.unit="%",r.size=100);var o=Ye(n.width);o.size="%"===o.unit?N().min([o.size,100]):N().min([o.size,t.width]);var a={CENTER:function(){return{marginLeft:o.size/-2+(o.unit||"px"),marginTop:"%"===r.unit?0:r.size/-2+(r.unit||"px"),left:"50%",top:"%"===r.unit?0:"50%"}},TOP_LEFT:function(){return{left:"0px",top:"0px"}},TOP_RIGHT:function(){return{right:"0px",top:"0px"}},TOP_CENTER:function(){return{marginLeft:o.size/-2+(o.unit||"px"),top:"0px",left:"50%"}},CENTER_RIGHT:function(){return{marginTop:"%"===r.unit?0:r.size/-2+(r.unit||"px"),top:"%"===r.unit?0:"50%",right:"0px"}},CENTER_LEFT:function(){return{marginTop:"%"===r.unit?0:r.size/-2+(r.unit||"px"),top:"%"===r.unit?0:"50%",left:"0px"}},BOTTOM_LEFT:function(){return{bottom:"0px",left:"0px"}},BOTTOM_RIGHT:function(){return{bottom:"0px",right:"0px"}},BOTTOM_CENTER:function(){return{marginLeft:o.size/-2+(o.unit||"px"),left:"50%",bottom:"0px"}}};return i.width=o.size+(o.unit||"px"),i.height=r.size+(r.unit||"px"),(0,s.pi)((0,s.pi)({},i),a[e.placement]())}(a,p,u)}}[a.origin](),p,u)},nt=n(87821),it=(0,p.ff)([je.xP,u.ZQ,nt.x,(0,p.t6)(c.R9,d.u2),l.R3],(function(e,t,n,i,r){var o=function(o,a){var u,p=e.get(o),c=p.options,l=p.originCompId,d=(0,s.pi)((0,s.pi)({},c),a),f=r.isModal(o)?function(e){return["height","width"].reduce((function(t,n){var i=e[n];if(!N().isNil(i)){var r=Ye(i),o=r.unit,a=r.size;o||(t[n]=a)}return t}),{})}(a):tt(d,t,l);e.update(((u={})[o]={styleOverrides:f},u)),n.setSiteScrollingBlocked(i.isMobileView&&et(f,t),o)};return{getTpaHandlers:function(){return{resizeWindow:function(t,n,i){var r=i.tpaCompData;return(0,s.mG)(this,void 0,Promise,(function(){var i;return(0,s.Jh)(this,(function(a){return m(t)?o(t,n):(null==r?void 0:r.isPinned)&&e.update(((i={})[t]={styleOverrides:{width:N().isNumber(n.width)?n.width+"px":n.width,height:N().isNumber(n.height)?n.height+"px":n.height}},i)),[2]}))}))},heightChanged:function(t,n){var i;m(t)?o(t,{height:n.height}):e.update(((i={})[t]={heightOverride:n.height,heightOverflow:Boolean(n.overflow)},i))}}}}})),rt=(0,p.ff)([],(function(){return{getTpaHandlers:function(){return{onReady:function(){return Promise.resolve()}}}}})),ot=n(26064),at=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2),(0,p.t6)(c.jC,l.u2),He.q,be.kc,d.B_,(0,p.jt)(Se.wk),(0,p.jt)(De.HC),(0,p.jt)(ot.M$),(0,p.jt)(U.d)],(function(e,t,i,r,o,a,u,p,c,l){var d=a.getTpaSectionByAppDefinitionId;return{getTpaHandlers:function(){return{navigateToSectionPage:function(a,f,g){var m,h=g.originCompId,v=g.appDefinitionId;return(0,s.mG)(this,void 0,void 0,(function(){var a,g,I,T,w,y,C,b,S,D,R,E,x,k,M,A,O,L,U,_,j,H,B,F,G,z,V,W,$,J,Z,Q,X,K,q,Y,ee=this;return(0,s.Jh)(this,(function(te){switch(te.label){case 0:return a=e.metaSiteId,g=e.userFileDomainUrl,I=e.routersConfig,T=e.isPremiumDomain,w=e.appsClientSpecMapData,y=e.appsClientSpecMapByApplicationId,C=e.isMobileView,b=Object.entries(i.pagesData),S=b.reduce((function(e,t){var n=(0,s.CR)(t,2),i=n[0],r=n[1];return e[r.tpaApplicationId]||(e[r.tpaApplicationId]={}),e[r.tpaApplicationId][r.tpaPageId]=i,e}),{}),D=N()(i.pagesData).groupBy("tpaApplicationId").mapValues((function(e){return e.map((function(e){return e.id}))})).value(),R=function(e){return(0,s.mG)(ee,void 0,Promise,(function(){var t,i,r,o,a,u,p,c;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return(t=null==l?void 0:l.urlMappings)?[4,n.e(7482).then(n.bind(n,35755))]:[3,2];case 1:if(i=s.sent().buildCustomizedUrl,r=(null===(c=null===(p=null==e?void 0:e.sectionIdentifier)||void 0===p?void 0:p.customizeTarget)||void 0===c?void 0:c.customUrlData)||{},o=r.key,a=r.variables,u=r.options,o&&a)return[2,i(t,o,a,u)];s.label=2;case 2:return[2]}}))}))},E=Ce({routingInfo:o.getLinkUtilsRoutingInfo(),metaSiteId:a,userFileDomainUrl:g,isPremiumDomain:T,routersConfig:I,popupPages:null==u?void 0:u.getPopupPages(),multilingualInfo:null==p?void 0:p.getMultilingualInfo(),isMobileView:C}),x=f.sectionIdentifier,M=(k=void 0===x?{}:x).sectionId,A=k.noTransition,O=void 0!==A&&A,L=k.appDefinitionId,U=k.queryParams,_=void 0===U?{}:U,j=k.state,H=f.state,B=H||j,F=function(e){return t.widgets[e].applicationId},G=function(e){return w[e].applicationId},z=L?G(L):F(h),(V=y[z])?(W=D[z])&&0!==W.length?($=M?S[z][M]:null,M&&!$?[2,{error:{message:'App page with sectionId "'+M+'" was not found.'}}]:(J=$||W[0],Z={type:"DynamicPageLink",routerId:J,innerRoute:B,isTpaRoute:!0},[4,R(f)])):[2,{error:{message:'Page with app "'+V.appDefinitionName+'" was not found.'}}]:L?[2,{error:{message:"Component was not found."}}]:[2,{error:{message:'Application with appDefinitionId "'+L+'" was not found on the site.'}}];case 1:return Q=te.sent()||E.getLinkUrlFromDataItem(Z),E.isDynamicPage(Q)?[2,{error:{message:"Can't navigate to a dynamic page. Please use the platform app API instead."}}]:(X=N().isEmpty(_)?"":"?appSectionParams="+encodeURIComponent(JSON.stringify(_)),K=""+Q+X,q=E.getLinkProps(K),O&&c&&c.disableNextTransition(),[4,r.navigateTo(q)]);case 2:if(!te.sent()){if(console.warn("You have invoked the navigateToSectionPage() API but you are already on the section page. Please use the pushState() API instead."),!1===(null===(m=f.sectionIdentifier)||void 0===m?void 0:m.shouldRefreshIframe))return[2,P];(Y=d(L||v))&&Y.rebuildSrc()}return[2,P]}}))}))}}}}})),ut=(0,p.ff)([u.ZQ,(0,p.t6)(c.$e,l.u2)],(function(e,t){return{getTpaHandlers:function(){return{boundingRectAndOffsets:function(n){var i={offsets:{x:0,y:0},rect:{left:0,right:0,top:0,bottom:0,height:0,width:0},scale:t.siteScale},r=e.document.getElementById(n);if(!r)return i;var o=function(){if(!t.isFixedHeader)return 0;var n=e.document.getElementById("SITE_HEADER");return n&&n.getBoundingClientRect().height||0}(),a=r.getBoundingClientRect();return i.offsets={x:a.left+e.scrollX,y:a.top+e.scrollY-o},i.rect=N()(a).pick(["left","right","top","bottom","height","width"]).mapValues((function(e){return Math.floor(e)})).value(),i.rect.top-=o,i}}}}})),st=n(21924),pt=(0,p.ff)([(0,p.t6)(c.$e,l.u2),st.QJ,u.EE],(function(e,t,n){var i=e.widgets;return{getTpaHandlers:function(){var e=this;return{setPageMetadata:(0,Me.u)(["site"],(function(r,o,a){var u=a.originCompId;return(0,s.mG)(e,void 0,Promise,(function(){var e;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return i[u]&&i[u].isSection?[4,t.setTPAOverrides(o)]:[3,3];case 1:return r.sent(),[4,t.renderSEO()];case 2:return r.sent(),[3,4];case 3:return e="Setting a page meta data is possible only to TPA Sections and MultiSections",n.captureError(new Error(e),{tags:{feature:"tpa"}}),[2,{error:{message:e}}];case 4:return[2,null]}}))}))}))}}}})),ct=(0,p.ff)([l.R3],(function(e){return{getTpaHandlers:function(){return{openModal:(0,Me.u)(["site","preview"],(function(t,n){var i=n.url,r=n.theme,o=n.height,a=n.width;return e.openModal(i,{width:a,height:o,theme:r},t)}))}}}})),lt=(0,p.ff)([(0,p.t6)(c.R9,d.u2),He.q,be.kc,je.QZ,(0,p.jt)(Se.wk),(0,p.jt)(De.HC),(0,p.jt)(ot.M$)],(function(e,t,n,i,r,o,a){var u=function(t){var i=e.metaSiteId,a=e.userFileDomainUrl,u=e.routersConfig,s=e.isPremiumDomain,p=e.isMobileView,c=Ce({routingInfo:n.getLinkUtilsRoutingInfo(),metaSiteId:i,isPremiumDomain:s,userFileDomainUrl:a,routersConfig:u,popupPages:null==r?void 0:r.getPopupPages(),multilingualInfo:null==o?void 0:o.getMultilingualInfo(),isMobileView:p}),l=c.getLinkUrlFromDataItem(t);return c.getLinkProps(l)},p=function(e){var i=e.pageId,r=e.anchorId,o=e.noTransition,s=function(e){var t=e.pageId,i=e.anchorId,r=u({type:"PageLink",pageId:t,target:"_self"});return i&&(n.getLinkUtilsRoutingInfo().pageId===t?r.anchorCompId=i:r.anchorDataId=i),r}({pageId:i,anchorId:r});return o&&a&&a.disableNextTransition(),t.navigateTo(s)};return{getTpaHandlers:function(){return{navigateToPage:function(e,t){var n=t.pageId,i=t.anchorId,r=t.noTransition;p({pageId:n,anchorId:i,noTransition:r})},navigateTo:function(e,n){var i=n.link;if(i.type!==y){var r=u(i);t.navigateTo(r)}},navigateToAnchor:function(e,t){var i=t.anchorId;return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return[4,p({pageId:n.getLinkUtilsRoutingInfo().pageId,anchorId:i})];case 1:if(!e.sent())throw new Error('anchor with id "'+i+'" was not found on the current page.');return[2,P]}}))}))},navigateToComponent:function(e,t){var i=t.compId,r=t.pageId,o=t.noPageTransition;return(0,s.mG)(this,void 0,void 0,(function(){var e;return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return e=r||n.getLinkUtilsRoutingInfo().pageId,[4,p({pageId:e,anchorId:i,noTransition:o})];case 1:if(!t.sent())throw new Error('Page id "'+e+'" does not contain the component id "'+i+'".');return[2,P]}}))}))}}}}})),dt=(0,p.ff)([(0,p.t6)(c.R9,d.u2)],(function(e){var t=e.appsClientSpecMapData;return{getTpaHandlers:function(){return{getApplicationFields:function(e,n){var i=n.appDefinitionId;return t[i].appFields}}}}})),ft=n(21568),gt=n(12073),mt=(0,p.ff)([ft.H,l.PV],(function(e,t){return{getTpaHandlers:function(){return{removeEventListener:function(n,i,r){var o=i.eventKey,a=r.appDefinitionId;o.startsWith(gt.$E)?e.unsubscribe(a,n,o):t.unregister(o,n)}}}}})),ht=(0,p.ff)([ft.H],(function(e){return{getTpaHandlers:function(){return{publish:function(t,n,i){var r=i.appDefinitionId;e.publish(r,t,n)}}}}})),vt=(0,p.ff)([ke.X,l.PV],(function(e,t){return{getTpaHandlers:function(){return{revalidateSession:function(n,i,r){var o=r.appDefinitionId;return(0,s.mG)(this,void 0,Promise,(function(){var n;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return[4,e.loadNewSession()];case 1:return i.sent(),n={instance:e.getAppInstanceByAppDefId(o)},t.dispatch("INSTANCE_CHANGED",(function(){return n}),{appDefinitionId:o}),[2,n]}}))}))}}}}})),It=n(24548),Pt=n(46466),Tt=(0,p.ff)([(0,p.t6)(c.jC,l.u2),(0,p.t6)(c.$e,l.u2),Pt.p,je.xP,It.i],(function(e,t,n,i,r){var o=t.widgets,a=r.getFontsConfig;return{getTpaHandlers:function(){return{appIsAlive:function(t,r,u){var p,c=u.originCompId,l=e.siteColors,d=e.isVisualFocusEnabled,f=e.siteTextPresets;i.update(((p={})[t]={sentAppIsAlive:!0},p));var g=o[c]||{style:{colors:{},numbers:{},booleans:{},fonts:{},googleFontsCssUrl:"",uploadFontFaces:""}};return(0,s.pi)({fonts:a(),commonConfig:n.getCommonConfig(),isVisualFocusEnabled:d,siteColors:l,siteTextPresets:f},g)}}}}})),wt=(0,p.ff)([l.PV,ft.H],(function(e,t){return{getTpaHandlers:function(){return{registerEventListener:function(n,i,r){var o=i.eventKey,a=i.receivePastEvents,u=void 0!==a&&a,s=r.callId,p=r.tpa,c=r.tpaCompData,l=(void 0===c?{}:c).widgetId,d=void 0===l?"":l,f=r.appDefinitionId;if(o.startsWith(gt.$E))t.handleIframeSubscribe(f,n,{eventKey:o,isPersistent:u,callId:s});else{e.register(o,n,(function(e,t){p.postMessage(JSON.stringify({intent:"addEventListener",eventType:e,params:t}),"*")}),{widgetId:d,appDefinitionId:f})}}}}}})),yt=(0,p.ff)([l.R3,l.jn],(function(e,t){return{getTpaHandlers:function(){return{closeWindow:function(n,i){return function(e){var t=e.tpaModal,n=e.tpaPopup,i=e.compId,r=void 0===i?"":i,o=e.onCloseMessage;n.isPopup(r)?n.closePopup(r,o):t.closeModal(o)}({tpaModal:e,tpaPopup:t,compId:n,onCloseMessage:i})}}}}})),Ct=(0,p.ff)([Le.jj],(function(e){return{getTpaHandlers:function(){return{getCurrentPageId:function(){return e.getCurrentRouteInfo().pageId}}}}})),bt=n(11717),St=(0,p.ff)([u.ZQ,(0,p.jt)(bt.FK)],(function(e,t){return{getTpaHandlers:function(){return{scrollTo:function(n,i){var r=i.x,o=i.y,a=i.scrollAnimation;return(0,s.mG)(this,void 0,void 0,(function(){var n,i;return(0,s.Jh)(this,(function(u){switch(u.label){case 0:return t?a?(n=1,i=0,[4,t.getInstance()]):[3,2]:[2];case 1:return u.sent().runAnimationOnElements("BaseScroll",[e],n,i,{y:o,x:r,callbacks:{onComplete:function(){return Promise.resolve()}}}),[3,3];case 2:e.scrollTo(r,o),u.label=3;case 3:return[2]}}))}))}}}}})),Dt=(0,p.ff)([u.ZQ],(function(e){return{getTpaHandlers:function(){return{scrollBy:function(t,n){var i=n.x,r=n.y;e.scrollBy(i,r)}}}}})),Rt=(0,p.ff)([(0,p.t6)(c.$e,l.u2)],(function(e){var t=e.widgets;return{getTpaHandlers:function(){return{getExternalId:function(e,n,i){var r=i.originCompId;return Promise.resolve(t[r].externalId)}}}}})),Et=(0,p.ff)([(0,p.t6)(c.$e,l.u2)],(function(e){var t=e.widgets,n=e.appPublicData;return{getTpaHandlers:function(){return{getValue:function(e,i,r){var o,a=i.key,u=i.scope,s=r.originCompId,p=t[s].applicationId,c="APP"===u?n[p]:t[s].componentPublicData;return c&&c[a]?((o={})[a]=c[a],o):{error:{message:"key "+a+" not found in "+u+" scope"}}}}}}})),xt=(0,p.ff)([(0,p.t6)(c.$e,l.u2)],(function(e){var t=e.widgets,n=e.appPublicData;return{getTpaHandlers:function(){function e(e){var i=t[e].applicationId;return{APP:n[i],COMPONENT:t[e].componentPublicData}}return{getPublicData:function(t,n,i){return e(i.originCompId)},getValues:function(t,n,i){var r=i.originCompId,o=n.scope,a=n.keys,u=e(r);return N().pickBy(u[o],(function(e,t){return a.includes(t)}))}}}}})),kt=(0,p.ff)([(0,p.t6)(c.$e,l.u2)],(function(e){var t=e.widgets;return{getTpaHandlers:function(){return{getStyleId:function(e,n,i){var r=i.originCompId;return t[r].styleId}}}}})),Mt=(0,p.ff)([(0,p.t6)(c.R9,d.u2)],(function(e){return{getTpaHandlers:function(){return{getViewMode:function(){return{editMode:e.viewMode}}}}}})),At=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2)],(function(e,t){var n=e.widgetsClientSpecMapData,i=t.pageId;return{getTpaHandlers:function(){return{getComponentInfo:function(e,t,r){var o,a,u,s=r.tpaCompData,p=(void 0===s?{}:s).widgetId,c=void 0===p?"":p,l="masterPage"===i;return{compId:e,showOnAllPages:l,pageId:l?"":i,tpaWidgetId:null===(o=n[c])||void 0===o?void 0:o.tpaWidgetId,appPageId:(null===(u=null===(a=n[c])||void 0===a?void 0:a.appPage)||void 0===u?void 0:u.id)||""}}}}}})),Ot=(0,p.ff)([(0,p.t6)(c.$e,l.u2),(0,p.t6)(c.jC,l.u2),(0,p.t6)(c.R9,d.u2)],(function(e,t,n){var i=e.widgets,r=t.pagesData,o=n.widgetsClientSpecMapData;return{getTpaHandlers:function(){return{isAppSectionInstalled:function(e,t,n){var a,u=t.sectionId,s=t.appDefinitionId,p=n.originCompId,c=null===(a=i[p])||void 0===a?void 0:a.applicationId;if(s){var l=N().find(o,{appDefinitionId:s});c=(null==l?void 0:l.applicationId)||c}var d=N().filter(r,{tpaApplicationId:Number(c)});return N().some(d,{tpaPageId:u})}}}}})),Lt=(0,p.ff)([l.Cc],(function(e){var t=e.getSiteMap;return{getTpaHandlers:function(){return{getSitePages:function(e,n){var i=n.includePagesUrl;return(0,s.mG)(this,void 0,Promise,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return[4,t()];case 1:return[2,e.sent().map((function(e){return(0,s.pi)({hide:e.hidden,id:N().isString(e.pageId)&&e.pageId.replace("#",""),isHomepage:e.isHomePage||!1,title:e.title},i&&{url:e.url})}))]}}))}))},getSiteMap:t}}}})),Ut=(0,p.ff)([be.Iz,Le.jj,(0,p.t6)(c.jC,l.u2),(0,p.t6)(c.R9,d.u2),u.ZQ],(function(e,t,n,i,r){var o=n.pagesData,a=i.externalBaseUrl;return{getTpaHandlers:function(){return{siteInfo:function(){var n=t.getCurrentRouteInfo().pageId,i=e.getParsedUrl().href,u=o[n],s=u.siteDescription,p=u.siteKeywords,c=u.title;return{siteDescription:s,siteKeywords:p,baseUrl:a,pageTitle:r.document.title,pageTitleOnly:c,referer:r.document.referrer,url:i}}}}}})),_t=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.jC,l.u2)],(function(e,t){var n=e.externalBaseUrl,i=t.pagesData;return{getTpaHandlers:function(){return{getSectionUrl:function(e,t,r){var o=t.sectionIdentifier,a=r.appClientSpecMapData,u=N().find(i,{tpaPageId:o});return(null==u?void 0:u.id)?{url:n+"/"+u.pageUriSEO}:{error:{message:'Page with app "'+(null==a?void 0:a.appDefinitionName)+'" was not found.'}}}}}}})),jt=(0,p.ff)([l.u5],(function(e){return{getTpaHandlers:function(){return{setFullScreenMobile:function(t,n){var i=n.isFullScreen;return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(n){return e.setFullScreenMobile(t,i),[2]}))}))}}}}})),Ht=function(){},Nt=[(0,p.ff)([],(function(){return{getTpaHandlers:function(){return{getSiteRevision:Ht,getDeviceType:Ht,toWixDate:Ht,getCompId:Ht,getOrigCompId:Ht,getWidth:Ht,isInModal:Ht,getLocale:Ht,getCacheKiller:Ht,getTarget:Ht,getInstanceId:Ht,getSignDate:Ht,getUid:Ht,getPermissions:Ht,getIpAndPort:Ht,getDemoMode:Ht,getInstanceValue:Ht,getSiteOwnerId:Ht,getImageUrl:Ht,getResizedImageUrl:Ht,getAudioUrl:Ht,getDocumentUrl:Ht,getSwfUrl:Ht,getPreviewSecureMusicUrl:Ht,getStyleParams:Ht,getStyleColorByKey:Ht,getColorByreference:Ht,getSiteTextPresets:Ht,getFontsSpriteUrl:Ht,getStyleFontByKey:Ht,getStyleFontByReference:Ht,getSiteColors:Ht,getViewModeInternal:Ht,postMessage:Ht,getEditorFonts:Ht,setUILIBParamValue:Ht,removeAppMetadata:Ht,setAppMetadata:Ht,setColorParam:Ht,setStyleParam:Ht,resizeComponent:Ht,setValue:Ht,isSupported:Ht,appEngaged:Ht,getInstalledInstance:Ht,isApplicationInstalled:Ht,isCustomApplicationPermissionsGranted:Ht,isGroupApplicationPermissionsGranted:Ht,setFullWidth:Ht}}}})),Tt,wt,yt,Ct,St,Dt,Rt,Et,xt,pt,vt,Mt,kt,At,Ot,Ut,ht,mt,Lt,dt,ct,lt,Je,_t,ut,Qe,it,rt,at,Ze,jt,(0,p.ff)([(0,p.jt)(ze.It)],(function(e){return{getTpaHandlers:function(){return{reportVisitorActivity:e?e.reportActivity:function(){}}}}})),Be,We,Ve,_e,Oe,Ue,Ee,Ae,Re,(0,p.ff)([je.QZ,je.xP],(function(e,t){return{getTpaHandlers:function(){return{getCurrentPageAnchors:function(){return N()(e.getEntireStore()).pickBy((function(e){return"Anchor"===e.componentType})).mapValues((function(e,n){return{id:n,title:t.get(n).name}})).values().sortBy((function(e){switch(e.id){case"SCROLL_TO_TOP":return 0;case"SCROLL_TO_BOTTOM":return 1;default:return 2}})).value()}}}}})),j,_,L],Bt={STATE_CHANGED:"STATE_CHANGED",INSTANCE_CHANGED:"INSTANCE_CHANGED",PAGE_NAVIGATION:"PAGE_NAVIGATION",MEMBER_DETAILS_UPDATED:"MEMBER_DETAILS_UPDATED",CONSENT_POLICY_UPDATE:"CONSENT_POLICY_UPDATE",SCROLL:"SCROLL",QUICK_ACTION_TRIGGERED:"QUICK_ACTION_TRIGGERED",COMMON_CONFIG_UPDATE:"COMMON_CONFIG_UPDATE"},Ft=(0,p.ff)([(0,p.t6)(c.Wf,l.u2),(0,p.t6)(c.$e,l.u2),ke.X],(function(e,t,n){var i=function(t,n,i){void 0===i&&(i=function(){return!0}),N().forEach(e.get().registry[t],(function(e,r){if(e){var o,a=e.listener,u=(0,s._T)(e,["listener"]),p=(o=i,N().isFunction(o)?o:function(e){var t=(0,s.CR)(Object.keys(o),1)[0];return e[t]===o[t]}),c=(0,s.pi)({compId:r},u);p(c)&&a(t,n(c))}}))};return function(e){e.update((function(e){return N().merge({},e,{registry:{}})}))}(e),n.addLoadNewSessionCallback((function(e){var t=e.results.instances;"expiry"===e.reason&&i("INSTANCE_CHANGED",(function(e){var n=e.appDefinitionId;return{instance:t[n]}}))})),{register:function(n,i,r,o){(function(e){return e in Bt})(n)&&e.update((function(e){var a,u;return N().merge({},e,{registry:(a={},a[n]=(u={},u[i]=(0,s.pi)((0,s.pi)({},o),{pageId:t.pageId,listener:r}),u),a)})}))},unregister:function(t,n){e.update((function(e){return N().set(e,["registry",t,n],null)}))},dispatch:i}})),Gt=n(44263),zt=(0,p.ff)([l.TJ,ke.X,u.ZQ],(function(e,t,n){var i=(0,Gt.w)(),r=i.resolver,o=i.promise;return(0,s.pi)((0,s.pi)({},e),{pageDidMount:function(){r(),t.addLoadNewSessionCallback(e.refreshAllPopups)},pageDidUnmount:function(){e.closeNonPersistentPopups()},openPopup:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return(0,Xe.yF)(n)?[2]:[4,o];case 1:return i.sent(),[2,e.openPopup.apply(e,(0,s.ev)([],(0,s.CR)(t)))]}}))}))}})})),Vt=n(98118),Wt=(0,p.ff)([je.xP,je.QZ,(0,p.t6)(c.Wf,l.u2),(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.jC,l.u2),(0,p.t6)(c.$e,l.u2),ke.X,u.ZQ,nt.x,Vt.ku,d.RN,d.ex,ft.H],(function(e,t,n,i,r,o,a,u,p,c,l,d,f){var m={},v=function(e){n.update((function(t){var n;return(0,s.pi)((0,s.pi)({},t),{tpaPopup:{persistentPopups:e,popups:(null===(n=null==t?void 0:t.tpaPopup)||void 0===n?void 0:n.popups)||{}}})}))},I=function(e){n.update((function(t){var n;return(0,s.pi)((0,s.pi)({},t),{tpaPopup:{popups:e,persistentPopups:(null===(n=null==t?void 0:t.tpaPopup)||void 0===n?void 0:n.persistentPopups)||{}}})}))},P=function(){return N().get(n.get(),["tpaPopup","popups"],{})},T=function(){return N().get(n.get(),["tpaPopup","persistentPopups"],{})},w=new RegExp(g("tpapopup-[0-9]+",".+"));return{isPopup:function(e){return w.test(e)},refreshAllPopups:function(){Object.values(T()).forEach((function(e){return(0,e.refreshPopUp)()})),Object.values(m).forEach((function(e){return(0,e.refreshPopUp)()}))},closeNonPersistentPopups:function(){return Object.values(m).forEach((function(e){(0,e.closePopup)()}))},openPopup:function(n,a,w){var y=this,C=i.isMobileView,b=i.isMobileDevice,S=i.previewMode,D=i.viewMode,R=r.masterPageTpaComps,E=o.widgets,x=o.pageId;return new Promise((function(i){return(0,s.mG)(y,void 0,void 0,(function(){var r,o,y,k,M,A,O,L,U,_,j,H,B;return(0,s.Jh)(this,(function(F){switch(F.label){case 0:return r=g("tpapopup-"+Date.now(),h(w)),o=w&&t.getContextIdOfCompId(w)||c,d.registerTpasForContext({contextId:o,pageId:x},[r]),y=function(e){if(a.persistent){var n=T();delete n[r],v(n)}else delete m[r],I(N().omit(P(),r));t.removeComponentFromDynamicStructure(r),p.setSiteScrollingBlocked(!1,r),a.persistent||f.clearListenersByCompId(r),i(e)},k=function(e){return/^0(?:px|%)?$/.test(""+e)},M=b&&S&&!k(a.width)&&!k(a.height)?{position:"fixed",width:"319px",height:"512px",marginLeft:0,marginTop:0,boxShadow:"none",left:"50%",transform:"translateX(-50%)",top:0}:{},A=(0,s.pi)((0,s.pi)({},tt(a,u,w)),M),L=function(){var t;(E[w]||R[w])&&e.update(((t={})[r]={src:O()},t))},U={options:a,originCompId:w,src:(O=function(){var e=E[w]||R[w];return l.buildSrc(r,x,e,n,{extraQueryParams:{isInPopup:"true",origCompId:w,viewMode:D}})})(),styleOverrides:A,isBareTheme:"BARE"===a.theme,closePopup:y},e.update(((j={})[r]=U,j)),p.setSiteScrollingBlocked(C&&et(A,u),r),[4,t.addComponentToDynamicStructure(r,{components:[],componentType:"TPAPopup"})];case 1:return F.sent(),(_={isPersistent:a.persistent,closePopup:y,refreshPopUp:L}).isPersistent?v((0,s.pi)((0,s.pi)({},T()),((H={})[r]=_,H))):(m[r]=_,I((0,s.pi)((0,s.pi)({},P()),((B={})[r]=_,B)))),[2]}}))}))}))},closePopup:function(e,t){var n=T()[e]||P()[e];n&&n.closePopup(t)},getOpenedPopups:function(){return(0,s.pi)((0,s.pi)({},T()),m)}}})),$t=n(19095),Jt=(0,p.ff)([(0,p.t6)(c.Wf,l.u2),(0,p.jt)(u.mS),u.Zr,u.EE],(function(e,t,n,i){var r,o=n.siteAssets,a=n.mode.debug;if(!(null===(r=e.get())||void 0===r?void 0:r.publicApiTPAHandlerState)){var u,p=new Promise((function(e){u=e}));e.update((function(){return(0,s.pi)((0,s.pi)({},e.get()),{publicApiTPAHandlerState:{alreadyInvoked:false,resolvePublicApiGetter:u,waitForAppsToRegister:p}})}))}return{pageWillUnmount:function(){e.update((function(){return(0,s.pi)((0,s.pi)({},e.get()),{publicApiTPAHandlerState:null})}))},getTpaHandlers:function(){var n=this;return{waitForWixCodeWorkerToBeReady:function(){return(0,s.mG)(n,void 0,void 0,(function(){var n,i,r,u,p;return(0,s.Jh)(this,(function(c){switch(c.label){case 0:return a&&console.warn("getPublicApi() has high performance overhead as we download and execute all apps on site. consider mitigating this by e.g migrating to Wix Blocks or OOI."),e.get().publicApiTPAHandlerState.alreadyInvoked?[2,{}]:[4,Promise.all([(0,$t.FR)(o.clientTopology.moduleRepoUrl),t.platformWorkerPromise,e.get().publicApiTPAHandlerState.waitForAppsToRegister])];case 1:return n=s.CR.apply(void 0,[c.sent(),3]),i=n[0],r=n[1],[4,(0,n[2])()];case 2:if(!(u=c.sent()).length)throw p="getPublicApi() rejected since there are no platform apps on page",a&&console.warn(p),new Error(p);return[4,Promise.all(u.map((function(e){return i.api.request(e,{target:r}).then((function(t){i.api.set(e,t)}))})))];case 3:return c.sent(),e.update((function(){return(0,s.pi)((0,s.pi)({},e.get()),{publicApiTPAHandlerState:(0,s.pi)((0,s.pi)({},e.get().publicApiTPAHandlerState),{alreadyInvoked:!0})})})),[2,{}]}}))}))}}},getSdkHandlers:function(){return{registerPublicApiGetter:function(t){e.get().publicApiTPAHandlerState?e.get().publicApiTPAHandlerState.resolvePublicApiGetter(t):i.captureError(new Error("resolvePublicApiGetter is not a function"),{tags:{resolvePublicApiGetter:!0}})}}}}})),Zt=n(51831),Qt=function(e,t){if(!(0,Xe.yF)(e)){var n=document.getElementById("site-root");n&&(t?(n.style.setProperty("overflow-y","hidden"),n.style.setProperty("height","0")):(n.style.removeProperty("overflow-y"),n.style.removeProperty("height")))}},Xt="tpaModal",Kt=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.jC,l.u2),(0,p.t6)(c.$e,l.u2),(0,p.t6)(c.Wf,l.u2),je.xP,u.ZQ,nt.x,je.QZ,ke.X,Vt.ku,Pt.p,d.RN,d.ex],(function(e,t,n,i,r,o,a,u,p,c,l,d,f){var m=t.masterPageTpaComps,v=function(){},I=function(e){i.update((function(t){return(0,s.pi)((0,s.pi)({},t),{tpaModal:(0,s.pi)((0,s.pi)({},(null==t?void 0:t.tpaModal)||{}),{closeModalImpl:e})})}))},P=function(e){i.update((function(t){return(0,s.pi)((0,s.pi)({},t),{tpaModal:(0,s.pi)((0,s.pi)({},(null==t?void 0:t.tpaModal)||{}),{currentModalId:e})})}))},T=function(){return N().get(i.get(),["tpaModal","closeModalImpl"],(function(){}))},w=function(e,t,n){var i={width:o.innerWidth,height:o.innerHeight};if(e=Math.min(e,i.width),t=Math.min(t,i.height),!n){var r=i.width-50,a=i.height-50;e>=r&&t>=a&&(e=r,t=a)}return{width:e,height:t}},y=(0,Gt.w)(),C=y.resolver,b=y.promise;return{pageDidMount:function(){C()},isModal:function(e){return e.startsWith(Xt)},openModal:function(t,i,p){var l,y=this,C=i.width,S=i.height,D=i.title,R=i.theme;if((0,Xe.yF)(o))return new Promise((function(){}));var E=e.tpaModalConfig,x=e.isMobileDevice,k=e.previewMode,M=e.viewMode,A=n.pageId,O=n.widgets,L=E.wixTPAs,U=g(Xt,h(p||A)),_=p&&u.getContextIdOfCompId(p)||c;f.registerTpasForContext({contextId:_,pageId:A},[U]),T()(),(0,Zt.U)();var j=p?r.get(p):null,H=L[j?j.applicationId:null],N=function(){var e,t=w(C,S,H);r.update(((e={})[U]={width:t.width,height:t.height},e))};return o.addEventListener("resize",N),x&&a.setSiteScrollingBlocked(!0,U),new Promise((function(e){return(0,s.mG)(y,void 0,void 0,(function(){var n,i,c,f;return(0,s.Jh)(this,(function(s){switch(s.label){case 0:return[4,b];case 1:return s.sent(),P(U),I((function(t){var n;I((function(){})),o.removeEventListener("resize",N),(0,Zt.i)(),v(),x&&(a.setSiteScrollingBlocked(!1,U),Qt(o,!1)),u.removeComponentFromDynamicStructure(U),r.update(((n={})[U]={src:null,closeModal:function(){}},n)),null==l||l.focus(),l=null,P(null),e(t)})),v=function(e){if((0,Xe.yF)(o))return function(){};var t=function(t){"Escape"===t.key&&e()};return o.addEventListener("keydown",t),function(){return o.removeEventListener("keydown",t)}}(T()),x&&"LIGHT_BOX"===R&&Qt(o,!0),n=w(C,S,H),i=p&&(O[p]||m[p])||{},c=d.buildSrc(U,A,i,t,{extraQueryParams:{isInModal:"true",origCompId:p,viewMode:M}}),r.update(((f={})[U]={src:c,width:n.width,height:n.height,closeModal:T(),isMobileDevice:x,isPreviewMode:k,title:D,theme:R},f)),l=document.activeElement,[4,u.addComponentToDynamicStructure(U,{components:[],componentType:"TPAModal"})];case 2:return s.sent(),[2]}}))}))}))},closeModal:function(e){T()(e)},getCurrentModalId:function(){return N().get(i.get(),["tpaModal","currentModalId"],null)}}})),qt=n(44041),Yt=n(96114),en=n.n(Yt),tn=(0,p.ff)([qt.r,l.PV,Vt.C9],(function(e,t,n){var i=e.registerToThrottledScroll;return{pageWillMount:function(){i((function(e){en().measure((function(){t.dispatch("SCROLL",(function(t){var n=t.compId;return function(e,t){var n=window.document.getElementById(t);if(!n)return{};var i=n.getBoundingClientRect();return{x:e.x+i.left,y:e.y+i.top,width:i.width,height:i.height,scrollTop:e.y,scrollLeft:e.x,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth}}(e,n)}),{pageId:n})}))}))}}})),nn=n(27227),rn=n(99708),on=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2),je.xP,u.ZQ,nn.l],(function(e,t,n,i,r){var o=e.widgetsClientSpecMapData,a=e.isMobileView,u=t.widgets,s=function(e){var t,o;!function(e){(0,Xe.yF)(e)||["fullScreenMode"].forEach((function(e){return document.body.classList.add(e)}))}(i),Qt(i,!0),r.set(((t={})[e+"-pinned-layer"]={"z-index":"var(--above-all-z-index) !important"},t)),n.update(((o={})[e]={isIOS:(0,rn.gn)(i),isMobileFullScreenMode:!0},o))},p=function(e){var t,o;!function(e){(0,Xe.yF)(e)||document.body.classList.remove("fullScreenMode")}(i),Qt(i,!1);var a,u,s=e+"-pinned-layer",p=r.getCompStyle(s);r.set(((t={})[s]=(a=p,u="z-index",Object.keys(a).reduce((function(e,t){return t!==u&&(e[t]=a[t]),e}),{})),t)),n.update(((o={})[e]={isMobileFullScreenMode:!1},o))};return{setFullScreenMobile:function(e,t){if(!a)throw new Error("show full screen is only available in Mobile view");(function(e){var t=u[e]||{},n=(o[t.widgetId]||{}).appDefinitionId;return Object.values(T).includes(n)})(e)&&(t?s(e):p(e))}}})),an=(0,p.ff)([Pt.p,l.PV],(function(e,t){return{pageWillMount:function(){e.registerToCommonConfigChange((function(e){return t.dispatch("COMMON_CONFIG_UPDATE",(function(){return e}))}))}}})),un=(0,p.ff)([l.PV,Le.jj],(function(e,t){return{appDidLoadPage:function(n){var i,r,o=n.pageId,a=null===(i=t.getPreviousRouterInfo())||void 0===i?void 0:i.pageId;if(a&&a!==o){var u={fromPage:a,toPage:o},s=null===(r=t.getCurrentRouteInfo().dynamicRouteData)||void 0===r?void 0:r.publicData;s&&(u.routerPublicData=s),e.dispatch("PAGE_NAVIGATION",(function(){return u}))}}}})),sn=function(e,t){return pn(t)&&t.templateId||e},pn=function(e){var t=e.isResponsive,n=e.widgetId;return t&&"14517f3f-ffc5-eced-f592-980aaa0bbb5c"===n},cn=(0,p.ff)([je.xP,(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2),ke.X,Vt.ku,d.ex,l.nV],(function(e,t,n,i,r,o,a){var u=t.widgetsClientSpecMapData,p=n.widgets,c=n.tpaInnerRouteConfig,l=n.pageId,d=Object.entries(p).map((function(e){var t=(0,s.CR)(e,2),n=t[0],i=t[1],r=sn(n,i);return n!==r&&o.registerTpaTemplateId(r,n),r}));o.registerTpasForContext({contextId:r,pageId:l},d);var f=function(t){var i,r=a.buildSrc({compId:t,tpaCompData:p[t],pageId:n.pageId,tpaInnerRouteConfig:c});e.update(((i={})[t]={src:r},i))},g=function(){var e=N().pickBy(p,(function(e){var t=e.widgetId;return!e.isOOI&&u[t]}));Object.keys(e).forEach(f)};return{pageWillMount:function(){return(0,s.mG)(this,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){return i.addLoadNewSessionCallback((function(e){"memberLogin"===e.reason&&g()})),[2]}))}))},rebuildTpasSrc:g,rebuildTpaSrc:f}})),ln=n(65070),dn=(0,p.ff)([l.PV,be.Iz,(0,p.t6)(c.$e,l.u2),Vt.C9],(function(e,t,n,i){var r=n.tpaInnerRouteConfig;return{onUrlChange:function(){var n=t.getRelativeUrl(),o=(0,ln._)(n.replace(/^\./,""),r.tpaPageUri),a=o?o.join("/"):"";e.dispatch("STATE_CHANGED",(function(){return{newState:a}}),{pageId:i})}}})),fn=(0,p.ff)([je.xP,je.QZ,l.PV,Le.jj,u.ZQ,Vt.C9,l.jn,l.e4],(function(e,t,n,i,r,o,a,u){var s=a.getOpenedPopups,p=u.rebuildTpasSrc,c={previousCurrency:null};return{onUrlChange:function(e){if(i.getCurrentRouteInfo()){var t=e.searchParams.get("currency");t!==c.previousCurrency&&(p(),Object.values(s()).forEach((function(e){return e.refreshPopUp()})),c.previousCurrency=t)}}}})),gn=(0,p.ff)([(0,p.t6)(c.R9,d.u2),d.RN],(function(e,t){var n=e.widgetsClientSpecMapData,i=e.deviceType,r=e.isMobileView;return{buildSrc:function(e){var r=e.compId,o=e.tpaCompData,a=e.pageId,u=e.tpaInnerRouteConfig,s=sn(r,o),p=o.widgetId,c=n[p],l=c.widgetUrl,d=c.mobileUrl,f="mobile"===i&&d||l,g=pn(o)?"masterPage":a,m={};return o.isSection&&(m.tpaInnerRouteConfig=u),t.buildSrc(s,g,o,f,m)},getDefaultProps:function(e,t){var i,o=n[e],a=o.appDefinitionName,u=o.appDefinitionId,s=o.appPage,p=o.allowScrolling;return{title:null!==(i=s.name)&&void 0!==i?i:a,appDefinitionName:a,appDefinitionId:u,isMobileView:r,allowScrolling:p,reportIframeStartedLoading:t||N().noop}}}})),mn=n(65482),hn=["TPASection","TPAMultiSection","TPAGluedWidget","TPAWidget"],vn=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2),l.nV,d.B_,d.lP,(0,p.jt)(l.Wt),(0,p.jt)(d.yA)],(function(e,t,n,i,r,o,a){var u=e.widgetsClientSpecMapData,p=i.registerTpaSection,c=i.unregisterTpaSection;return{componentTypes:hn,componentWillMount:function(e){var i=t.widgets,l=t.tpaInnerRouteConfig,d=t.pageId,f=i[e.id],g=f.widgetId,m=f.isSection,h=f.appDefinitionId,v=f.templateId;if(u[g]){a&&a.registerToDataCapsule(v||e.id,h);var I=function(){return n.buildSrc({compId:e.id,tpaCompData:f,pageId:d,tpaInnerRouteConfig:l})};if(m){var P={appDefinitionId:h,rebuildSrc:function(){e.updateProps({src:I()})}};p(e.id,P)}var T=N().once((function(){o&&o.reportIframeStartedLoading(e.id)})),w=n.getDefaultProps(g,T),y=sn(e.id,f),C=r?r.getCachedProps(y):{};return e.updateProps((0,s.pi)((0,s.pi)((0,s.pi)({},w),{src:I()}),C)),function(){r&&("masterPage"===d?r.cacheProps(e.id):pn(f)&&r.cacheProps(y,e.getProps())),c(e.id),a&&a.unregister(v||e.id)}}}}})),In=(0,p.ff)([(0,p.t6)(c.R9,d.u2),(0,p.t6)(c.$e,l.u2),Le.jj,Fe.s,Ge.$,ze.R1],(function(e,t,n,i,r,o){var a=e.widgetsClientSpecMapData,u=t.widgets;return{reportIframeStartedLoading:function(e){var t=u[e],s=t.widgetId,p=t.templateId,c=n.getCurrentRouteInfo(),l=Date.now()-i.initialRequestTimestamp;r.logger.log({appId:a[s].appDefinitionId,widget_id:s,instance_id:null!=p?p:e,src:42,evid:642,tts:l,pid:c?c.pageId:null,pn:o.getPageNumber()},{endpoint:"ugc-viewer"})}}})),Pn="$TPA$",Tn=((oe={})[w]=["type","pageId"],oe[y]=["type","target","url"],oe[C]=["type","anchorName","anchorDataId","pageId"],oe[b]=["type","recipient","subject"],oe[S]=["type","phoneNumber"],oe[D]=["type","phoneNumber"],oe[R]=["type","docId","name"],oe[E]=["type","routerId","innerRoute","anchorDataId"],oe[x]=["type","address"],oe);function wn(e,t,n,i){var r=e.label||"",o=!e.isVisible||!1,a=e.link?function(e){var t=N().pick(e.link,Tn[e.link.type]);if(N().isObject(t.pageId)&&(t.pageId="#"+N().get(t,"pageId.id")),t.anchorDataId){var n=N().get(t,"anchorDataId.id",t.anchorDataId);t.anchorDataId="SCROLL_TO_TOP"===n||"SCROLL_TO_BOTTOM"===n?n:"#"+n}return t}(e):{},u=N().merge(a,{title:r,hidden:o});if(!u.type)return{type:k,hidden:o,title:r,subPages:u.subPages};switch(u.type){default:case w:case C:N().merge(u,yn(e,t,n));break;case R:var s=i.getLinkUrlFromDataItem(u),p=i.getLinkProps(s);u.url=p.href}return u}function yn(e,t,n){var i,r,o,a,u=null===(r=null===(i=e.link)||void 0===i?void 0:i.pageId)||void 0===r?void 0:r.pageUriSEO,s={isHomePage:(null===(a=null===(o=e.link)||void 0===o?void 0:o.pageId)||void 0===a?void 0:a.id)===t};return u&&N().assign(s,{url:n+"/"+u}),s}function Cn(e,t,n,i,r){var o=t.externalBaseUrl,a=t.appsClientSpecMapByApplicationId,u=t.metaSiteId,s=t.isPremiumDomain,p=t.userFileDomainUrl,c=t.routersConfig,l=t.isMobileView,d=n.getLinkUtilsRoutingInfo(),f=Ce({routingInfo:d,metaSiteId:u,userFileDomainUrl:p,isPremiumDomain:s,routersConfig:c,popupPages:null==i?void 0:i.getPopupPages(),multilingualInfo:null==r?void 0:r.getMultilingualInfo(),isMobileView:l});return function(e){var t=e.menuItems,n=e.mainPageId,i=e.baseUrl,r=e.linkUtils;return N().map(t,(function(e){var t=wn(e,n,i,r);if(t.type===w||t.type===k){var o=N().map(e.items,(function(e){return wn(e,n,i,r)}));N().size(o)>0&&N().assign(t,{subPages:o})}return t}))}({menuItems:N().filter(e,(function(e){var t=e.link;return!function(e,t){var n,i;if(!t)return!1;if(t.type===w){var r=null===(n=t.pageId)||void 0===n?void 0:n.tpaPageId,o=e[null===(i=t.pageId)||void 0===i?void 0:i.tpaApplicationId];if(o&&r){N().includes(r,Pn)&&(r=r.substr(0,r.indexOf(Pn)));var a=N().find(o.widgets,(function(e){var t;return(null===(t=e.appPage)||void 0===t?void 0:t.id)===r}));return null==a?void 0:a.appPage.hideFromMenu}}return!1}(a,t)})),mainPageId:d.mainPageId,baseUrl:o,linkUtils:f})}var bn=(0,p.ff)([(0,p.t6)(c.R9,d.u2),be.kc,Vt.cK,(0,p.jt)(Se.wk),(0,p.jt)(De.HC)],(function(e,t,n,i,r){return{getSiteMap:function(){return(0,s.mG)(void 0,void 0,void 0,(function(){return(0,s.Jh)(this,(function(o){switch(o.label){case 0:return[4,n.fetchResource("masterPage","siteMap")];case 1:return[2,Cn(o.sent(),e,t,i,r)]}}))}))}}})),Sn=function(e){e(l.nV).to(gn),e(l.Wt).to(In),e(o.j.PageWillMountHandler,l.e4).to(cn),e(mn.Vx).to(vn),e(d.XA).to(M),e(a.g,u.CT,o.j.PageWillUnmountHandler).to(Jt),e(l.PV).to(Ft),e(o.j.AppDidLoadPageHandler).to(un),e(l.TJ).to(Wt),e(o.j.PageDidMountHandler,o.j.PageDidUnmountHandler,l.jn).to(zt),e(l.Cc).to(bn),Nt.forEach((function(t){e(a.g).to(t)})),e(o.j.PageDidMountHandler,o.j.PageDidUnmountHandler).to(O),e(o.j.PageDidMountHandler,l.R3).to(Kt),e(o.j.PageWillMountHandler).to(tn),e(l.u5).to(on),e(o.j.PageWillMountHandler).to(an),e(be.bV).to(dn),e(be.bV).to(fn)}},65070:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});var i=n(31191),r=function(e,t){var n=e.split("/"),r=n.indexOf(t||"");return r<0||n[r]!==t?null:(0,i.CR)(n.splice(r)).slice(1)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/tpa.5a499002.chunk.min.js.map